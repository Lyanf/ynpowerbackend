{"version":3,"sources":["webpack:///./src/views/DataMining.vue?4c3e","webpack:///src/views/DataMining.vue","webpack:///./src/views/DataMining.vue?f877","webpack:///./src/views/DataMining.vue","webpack:///./src/views/DataMining.vue?d8e1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","knownFactors","model","value","postParams","callback","$$v","$set","expression","miningResults","length","_v","_e","_l","item","key","_s","StartYear","EndYear","on","$event","label","param","kind","startsWith","currentTag","tag","loadParameters","isFormComplete","commitMining","goToResultPage","method","kMeansData","exportKMeansData","pcaData","exportPCAData","aprioriData","exportAprioriData","staticRenderFns","name","components","YearRangeSelector","mounted","loadFactors","loadTags","computed","params","factors","methods","$axios","get","tagType","$data","then","response","data","forEach","element","econamelist","post","Clusters","index","members","elem","join","factorIndex","percentage","ComponetRatio","FactorName","innerIndex","factor","Vectors","FactorsName","i","score","Score","confidence","Confidence","window","location","exportTableSheet","fields","allMethods","knownTags","requiredParams","suggestCategoryCount","watch","para","object","undefined","default","component"],"mappings":"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","file":"js/chunk-f2eabcca.2ff5e6be.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{staticStyle:{\"height\":\"100%\"},attrs:{\"offset\":1,\"span\":12}},[_c('el-row',[_c('el-transfer',{staticStyle:{\"height\":\"100%\"},attrs:{\"filterable\":\"\",\"filter-placeholder\":\"输入以查找\",\"data\":_vm.knownFactors,\"titles\":['待选择影响因素', '已选择影响因素'],\"button-texts\":['移除', '添加']},model:{value:(_vm.postParams.factors),callback:function ($$v) {_vm.$set(_vm.postParams, \"factors\", $$v)},expression:\"postParams.factors\"}})],1),_c('el-row',{staticStyle:{\"margin-top\":\"5em\"}},[(_vm.miningResults.length > 0)?_c('span',[_vm._v(\"挖掘结果\")]):_vm._e()]),_c('el-row',{staticStyle:{\"margin-top\":\"2em\"}},_vm._l((_vm.miningResults),function(item){return _c('el-tag',{key:item,staticStyle:{\"margin\":\"5px\"}},[_vm._v(\" \"+_vm._s(item)+\" \")])}),1)],1),_c('el-col',{staticStyle:{\"margin-right\":\"20px\"},attrs:{\"span\":9,\"offset\":1}},[_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"数据年份：\"}},[_c('year-range-selector',{attrs:{\"begin-year\":_vm.postParams.StartYear,\"end-year\":_vm.postParams.EndYear},on:{\"update:beginYear\":function($event){return _vm.$set(_vm.postParams, \"StartYear\", $event)},\"update:begin-year\":function($event){return _vm.$set(_vm.postParams, \"StartYear\", $event)},\"update:endYear\":function($event){return _vm.$set(_vm.postParams, \"EndYear\", $event)},\"update:end-year\":function($event){return _vm.$set(_vm.postParams, \"EndYear\", $event)}}})],1),_c('el-form-item',{attrs:{\"label\":\"挖掘方法：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.method),callback:function ($$v) {_vm.$set(_vm.postParams, \"method\", $$v)},expression:\"postParams.method\"}},_vm._l((_vm.allMethods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._l((_vm.requiredParams),function(param){return _c('div',{key:param.key},[(param.key !== 'econamelist')?_c('el-form-item',{attrs:{\"label\":param.label + '：'}},[(param.kind === 'int')?_c('el-input',{attrs:{\"step\":1,\"type\":\"number\",\"clearable\":\"\",\"placeholder\":\"请输入整数数字\"},model:{value:(_vm.postParams[param.key]),callback:function ($$v) {_vm.$set(_vm.postParams, param.key, $$v)},expression:\"postParams[param.key]\"}}):(param.kind === 'float')?_c('el-input',{attrs:{\"step\":0.01,\"type\":\"number\",\"clearable\":\"\",\"placeholder\":\"请输入数字\"},model:{value:(_vm.postParams[param.key]),callback:function ($$v) {_vm.$set(_vm.postParams, param.key, $$v)},expression:\"postParams[param.key]\"}}):(param.kind.startsWith('option'))?_c('el-select',{attrs:{\"placeholder\":\"请选择一项\"},model:{value:(_vm.postParams[param.key]),callback:function ($$v) {_vm.$set(_vm.postParams, param.key, $$v)},expression:\"postParams[param.key]\"}},_vm._l((param.value),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1):(param.kind.startsWith('multioption'))?_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择数项\"},model:{value:(_vm.postParams[param.key]),callback:function ($$v) {_vm.$set(_vm.postParams, param.key, $$v)},expression:\"postParams[param.key]\"}},_vm._l((param.value),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1):_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.postParams[param.key]),callback:function ($$v) {_vm.$set(_vm.postParams, param.key, $$v)},expression:\"postParams[param.key]\"}})],1):_vm._e()],1)}),_c('el-form-item',{attrs:{\"label\":\"方案标签：\"}},[_c('el-input',{attrs:{\"clearable\":\"\",\"placeholder\":\"可留空\"},model:{value:(_vm.postParams.tag),callback:function ($$v) {_vm.$set(_vm.postParams, \"tag\", $$v)},expression:\"postParams.tag\"}})],1),_c('el-form-item',{attrs:{\"label\":\"加载方案：\"}},[_c('el-select',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":\"选择标签\",\"size\":\"small\"},model:{value:(_vm.currentTag),callback:function ($$v) {_vm.currentTag=$$v},expression:\"currentTag\"}},_vm._l((_vm.knownTags),function(item){return _c('el-option',{key:item.tag,attrs:{\"label\":item.tag,\"value\":item.tag}})}),1),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\",\"disabled\":_vm.currentTag === null},on:{\"click\":_vm.loadParameters}},[_vm._v(\"加载\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.isFormComplete},on:{\"click\":_vm.commitMining}},[_vm._v(\" 确定 \")]),_c('el-button',{on:{\"click\":_vm.goToResultPage}},[_vm._v(\"挖掘结果展示\")])],1)],2)],1),_c('el-col',{attrs:{\"offset\":1,\"span\":22}},[_c('el-form',[(_vm.postParams.method === 'K均值算法')?_c('div',[_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.kMeansData.length === 0},on:{\"click\":_vm.exportKMeansData}},[_vm._v(\"导出表格\")])],1),_c('el-form-item',{attrs:{\"label\":\"挖掘结果表：\"}},[_c('el-table',{attrs:{\"data\":_vm.kMeansData}},[_c('el-table-column',{attrs:{\"prop\":\"index\",\"label\":\"类别序号\"}}),_c('el-table-column',{attrs:{\"prop\":\"members\",\"label\":\"成员\"}})],1)],1)],1):_vm._e(),(_vm.postParams.method === '主成分分析算法')?_c('div',[_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.pcaData.length === 0},on:{\"click\":_vm.exportPCAData}},[_vm._v(\"导出表格\")])],1),_c('el-form-item',{attrs:{\"label\":\"挖掘结果表：\"}},[_c('el-table',{attrs:{\"data\":_vm.pcaData}},[_c('el-table-column',{attrs:{\"prop\":\"index\",\"label\":\"主成分编号\"}}),_c('el-table-column',{attrs:{\"prop\":\"percentage\",\"label\":\"所占比例\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"影响因素名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"factor\",\"label\":\"影响因素对应系数\"}})],1)],1)],1):_vm._e(),(_vm.postParams.method === '关联规则分析算法')?_c('div',[_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.aprioriData.length === 0},on:{\"click\":_vm.exportAprioriData}},[_vm._v(\"导出表格\")])],1),_c('el-form-item',{attrs:{\"label\":\"挖掘结果表：\"}},[_c('el-table',{attrs:{\"data\":_vm.aprioriData}},[_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"影响因素名称\"}}),_c('el-table-column',{attrs:{\"prop\":\"score\",\"label\":\"影响因素强弱得分\"}}),_c('el-table-column',{attrs:{\"prop\":\"confidence\",\"label\":\"置信度\"}})],1)],1)],1):_vm._e()])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-row>\n    <el-col style=\"height: 100%\" :offset=\"1\" :span=\"12\">\n      <el-row>\n        <el-transfer\n          filterable\n          filter-placeholder=\"输入以查找\"\n          v-model=\"postParams.factors\"\n          :data=\"knownFactors\"\n          :titles=\"['待选择影响因素', '已选择影响因素']\"\n          :button-texts=\"['移除', '添加']\"\n          style=\"height: 100%\"\n        >\n        </el-transfer>\n      </el-row>\n      <el-row style=\"margin-top: 5em\">\n        <span v-if=\"miningResults.length > 0\">挖掘结果</span>\n      </el-row>\n      <el-row style=\"margin-top: 2em\" >\n        <el-tag v-for=\"item in miningResults\"\n                :key=\"item\"\n        style=\"margin: 5px\">\n          {{item}}\n        </el-tag>\n      </el-row>\n    </el-col>\n    <el-col :span=\"9\" :offset=\"1\" style=\"margin-right: 20px\">\n      <el-form label-position=\"right\" label-width=\"auto\">\n        <el-form-item label=\"数据年份：\">\n          <year-range-selector :begin-year.sync=\"postParams.StartYear\"\n                               :end-year.sync=\"postParams.EndYear\">\n          </year-range-selector>\n        </el-form-item>\n        <el-form-item label=\"挖掘方法：\">\n          <el-select placeholder=\"请选择\" v-model=\"postParams.method\">\n            <el-option\n              v-for=\"item in allMethods\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <div v-for=\"param in requiredParams\" :key=\"param.key\">\n          <el-form-item :label=\"param.label + '：'\" v-if=\"param.key !== 'econamelist'\">\n            <el-input v-if=\"param.kind === 'int'\" :step=\"1\" type=\"number\"\n                      clearable v-model=\"postParams[param.key]\"\n                      placeholder=\"请输入整数数字\"></el-input>\n            <el-input v-else-if=\"param.kind === 'float'\" :step=\"0.01\" type=\"number\"\n                      clearable v-model=\"postParams[param.key]\"\n                      placeholder=\"请输入数字\"></el-input>\n            <el-select v-else-if=\"param.kind.startsWith('option')\" placeholder=\"请选择一项\"\n                       v-model=\"postParams[param.key]\">\n              <el-option\n                v-for=\"item in param.value\"\n                :key=\"item\"\n                :label=\"item\"\n                :value=\"item\">\n              </el-option>\n            </el-select>\n            <el-select v-else-if=\"param.kind.startsWith('multioption')\" multiple\n                       placeholder=\"请选择数项\" v-model=\"postParams[param.key]\">\n              <el-option\n                v-for=\"item in param.value\"\n                :key=\"item\"\n                :label=\"item\"\n                :value=\"item\">\n              </el-option>\n            </el-select>\n            <el-input v-else placeholder=\"请输入\" v-model=\"postParams[param.key]\">\n            </el-input>\n          </el-form-item>\n        </div>\n        <el-form-item label=\"方案标签：\">\n          <el-input clearable placeholder=\"可留空\" v-model=\"postParams.tag\">\n          </el-input>\n        </el-form-item>\n        <el-form-item label=\"加载方案：\">\n          <el-select placeholder=\"选择标签\" v-model=\"currentTag\" size=\"small\" style=\"width: 50%\">\n            <el-option\n              v-for=\"item in knownTags\"\n              :key=\"item.tag\"\n              :label=\"item.tag\"\n              :value=\"item.tag\">\n            </el-option>\n          </el-select>\n          <el-button size=\"small\" @click=\"loadParameters\"\n                     :disabled=\"currentTag === null\"\n                     style=\"margin-left: 10px\">加载</el-button>\n        </el-form-item>\n        <el-form-item>\n          <el-button @click=\"commitMining\"\n                     type=\"primary\"\n                     :disabled=\"!isFormComplete\">\n            确定\n          </el-button>\n          <el-button @click=\"goToResultPage\">挖掘结果展示</el-button>\n        </el-form-item>\n      </el-form>\n    </el-col>\n    <el-col :offset=\"1\" :span=\"22\">\n      <el-form>\n        <div v-if=\"postParams.method === 'K均值算法'\">\n          <el-form-item>\n            <el-button @click=\"exportKMeansData\"\n                       :disabled=\"kMeansData.length === 0\">导出表格</el-button>\n          </el-form-item>\n          <el-form-item label=\"挖掘结果表：\">\n            <el-table :data=\"kMeansData\">\n              <el-table-column prop=\"index\" label=\"类别序号\"></el-table-column>\n              <el-table-column prop=\"members\" label=\"成员\"></el-table-column>\n            </el-table>\n          </el-form-item>\n        </div>\n        <div v-if=\"postParams.method === '主成分分析算法'\">\n          <el-form-item>\n            <el-button @click=\"exportPCAData\"\n                       :disabled=\"pcaData.length === 0\">导出表格</el-button>\n          </el-form-item>\n          <el-form-item label=\"挖掘结果表：\">\n            <el-table :data=\"pcaData\">\n              <el-table-column prop=\"index\" label=\"主成分编号\"></el-table-column>\n              <el-table-column prop=\"percentage\" label=\"所占比例\"></el-table-column>\n              <el-table-column prop=\"name\" label=\"影响因素名称\"></el-table-column>\n              <el-table-column prop=\"factor\" label=\"影响因素对应系数\"></el-table-column>\n            </el-table>\n          </el-form-item>\n        </div>\n        <div v-if=\"postParams.method === '关联规则分析算法'\">\n          <el-form-item>\n            <el-button @click=\"exportAprioriData\"\n                       :disabled=\"aprioriData.length === 0\">导出表格</el-button>\n          </el-form-item>\n          <el-form-item label=\"挖掘结果表：\">\n            <el-table :data=\"aprioriData\">\n              <el-table-column prop=\"name\" label=\"影响因素名称\"></el-table-column>\n              <el-table-column prop=\"score\" label=\"影响因素强弱得分\"></el-table-column>\n              <el-table-column prop=\"confidence\" label=\"置信度\"></el-table-column>\n            </el-table>\n          </el-form-item>\n        </div>\n      </el-form>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\nimport YearRangeSelector from '@/components/YearRangeSelector.vue';\nimport * as json2csv from 'json2csv';\nimport { saveAs } from 'file-saver';\n\nexport default {\n  name: 'DataMining',\n  components: {\n    YearRangeSelector,\n  },\n  mounted() {\n    this.loadFactors();\n    this.loadTags();\n  },\n  computed: {\n    isFormComplete() {\n      const params = this.$data.postParams;\n      if (params.StartYear === null || params.EndYear === null) {\n        return false;\n      }\n      if (params.factors.length === 0) {\n        return false;\n      }\n      if (params.method.length === 0) {\n        return false;\n      }\n      return true;\n    },\n  },\n  methods: {\n    loadTags() {\n      this.$axios.get('/tags/query', {\n        params: {\n          tagType: 'MINING',\n        },\n      }).then((response) => {\n        this.$data.knownTags = response.data.data;\n      });\n    },\n    loadParameters() {\n      this.$axios.get('/params/mining', {\n        params: {\n          tag: this.$data.currentTag,\n        },\n      }).then((response) => {\n        this.$data.postParams = response.data.data;\n      });\n    },\n    loadFactors() {\n      this.$axios.get('/factor/query').then((response) => {\n        response.data.data.forEach((element) => {\n          this.$data.knownFactors.push({\n            label: element,\n            key: element,\n          });\n        });\n      });\n    },\n    commitMining() {\n      const params = this.$data.postParams;\n      params.econamelist = this.$data.postParams.factors;\n      this.$axios.post('/mining/request', params).then((response) => {\n        this.$messenger.success('数据挖掘成功。');\n        if (params.method === 'K均值算法') {\n          this.$data.kMeansData = [];\n          let index = 1;\n          response.data.data.Clusters.forEach((elem) => {\n            this.$data.kMeansData.push({\n              index,\n              members: elem.join('、'),\n            });\n            index += 1;\n          });\n        } else if (params.method === '主成分分析算法') {\n          this.$data.pcaData = [];\n          for (let factorIndex = 0;\n            factorIndex < response.data.data.N_components.length;\n            factorIndex += 1) {\n            for (let innerIndex = 0;\n              innerIndex < response.data.data.FactorName.length;\n              innerIndex += 1) {\n              this.$data.pcaData.push({\n                index: factorIndex + 1,\n                percentage: response.data.data.ComponetRatio[factorIndex],\n                name: response.data.data.FactorName[innerIndex],\n                factor: response.data.data.Vectors[factorIndex][innerIndex],\n              });\n            }\n          }\n        } else if (params.method === '关联规则分析算法') {\n          this.$data.aprioriData = [];\n          for (let i = 0; i < response.data.data.FactorsName.length; i += 1) {\n            this.$data.aprioriData.push({\n              name: response.data.data.FactorsName[i],\n              score: response.data.data.Score[i],\n              confidence: response.data.data.Confidence[i],\n            });\n          }\n        }\n      });\n    },\n    goToResultPage() {\n      window.location = '/#/miningResult';\n    },\n    exportKMeansData() {\n      this.exportTableSheet(this.$data.kMeansData, ['index', 'members']);\n    },\n    exportPCAData() {\n      this.exportTableSheet(this.$data.pcaData, ['index', 'percentage', 'name', 'factor']);\n    },\n    exportAprioriData() {\n      this.exportTableSheet(this.$data.aprioriData, ['name', 'score', 'confidence']);\n    },\n    exportTableSheet(rawData, fields) {\n      const data = json2csv.parse(rawData, {\n        fields,\n      });\n      const blob = new Blob([data], { type: 'text/csv' });\n      saveAs(blob, 'database.csv');\n    },\n  },\n  data() {\n    return {\n      allMethods: [{\n        label: 'K均值算法',\n        value: 'K均值算法',\n      }, {\n        label: '主成分分析算法',\n        value: '主成分分析算法',\n      }, {\n        label: '关联规则分析算法',\n        value: '关联规则分析算法',\n      }],\n      knownFactors: [],\n      knownTags: [],\n      requiredParams: [],\n      currentTag: null,\n      suggestCategoryCount: null,\n      miningResults: [],\n      postParams: {\n        method: '',\n        factors: [],\n        StartYear: null,\n        EndYear: null,\n        tag: '',\n        tagType: 'MINING',\n      },\n      kMeansData: [],\n      pcaData: [],\n      aprioriData: [],\n    };\n  },\n  watch: {\n    // eslint-disable-next-line func-names\n    'postParams.method': function (value) {\n      this.$data.requiredParams = [];\n      this.$axios.get('/get/args', {\n        params: {\n          method: value,\n        },\n      }).then((response) => {\n        response.data.data.para.forEach((object) => {\n          if (object.key === 'StartYear' || object.key === 'EndYear'\n            || object.key === 'PreStartYear' || object.key === 'PreEndYear') {\n            // skip those rubbish parameters\n          } else {\n            // whatever\n            this.$data.requiredParams.push(object);\n            if (object.default !== undefined) {\n              this.$set(this.postParams, object.key, object.default);\n            }\n          }\n        });\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-input, .el-select {\n  width: 60%\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataMining.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataMining.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataMining.vue?vue&type=template&id=31985b64&scoped=true&\"\nimport script from \"./DataMining.vue?vue&type=script&lang=js&\"\nexport * from \"./DataMining.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataMining.vue?vue&type=style&index=0&id=31985b64&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"31985b64\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataMining.vue?vue&type=style&index=0&id=31985b64&scoped=true&lang=css&\""],"sourceRoot":""}