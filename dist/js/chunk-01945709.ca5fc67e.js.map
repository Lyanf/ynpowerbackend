{"version":3,"sources":["webpack:///./src/components/YearRangeSelector.vue?f616","webpack:///src/components/YearRangeSelector.vue","webpack:///./src/components/YearRangeSelector.vue?85dd","webpack:///./src/components/YearRangeSelector.vue","webpack:///./src/components/YearRangeSelector.vue?9635","webpack:///./src/views/DataCheck.vue?170a","webpack:///./src/views/DataCheck.vue?4923","webpack:///./src/components/DataPatchTable.vue?1bed","webpack:///src/components/DataPatchTable.vue","webpack:///./src/components/DataPatchTable.vue?2625","webpack:///./src/components/DataPatchTable.vue","webpack:///src/views/DataCheck.vue","webpack:///./src/views/DataCheck.vue?58b9","webpack:///./src/views/DataCheck.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","style","attrs","on","beginChange","model","value","callback","$$v","beginYearInternal","expression","staticStyle","_v","endChange","endYearInternal","staticRenderFns","name","props","data","beginYear","endYear","methods","$emit","getFullYear","watch","Date","computed","mainStyle","expand","component","ref","metaDataTree","postParams","$set","_l","item","key","$event","category","length","loadExceptions","tableData","columns","displayData","rowHandle","editTemplate","handleDialogCancel","handleRowResolve","handleRowAccept","_s","dataEntryLength","undefined","title","remove","text","size","type","confirm","edit","fixed","components","knownRegions","knownGrains","region","grain","mounted","loadMetaData","loadRegions","loadGrains","$axios","get","then","post","$data"],"mappings":"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","file":"js/chunk-01945709.ca5fc67e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{style:(_vm.mainStyle),attrs:{\"type\":\"flex\",\"justify\":\"left\"}},[_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"起始年份\"},on:{\"change\":_vm.beginChange},model:{value:(_vm.beginYearInternal),callback:function ($$v) {_vm.beginYearInternal=$$v},expression:\"beginYearInternal\"}})],1),_c('el-col',{staticStyle:{\"margin\":\"auto\",\"text-align\":\"center\",\"color\":\"lightgray\",\"font-size\":\"12px\"}},[_vm._v(\" 至 \")]),_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"终止年份\"},on:{\"change\":_vm.endChange},model:{value:(_vm.endYearInternal),callback:function ($$v) {_vm.endYearInternal=$$v},expression:\"endYearInternal\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-row type=\"flex\" justify=\"left\" :style=\"mainStyle\">\r\n<!--    <div>-->\r\n<!--      {{ this.$data }}-->\r\n<!--    </div>-->\r\n<!--    <div>-->\r\n<!--      {{ this.$props }}-->\r\n<!--    </div>-->\r\n    <el-col>\r\n      <el-date-picker\r\n        v-model=\"beginYearInternal\"\r\n        type=\"year\"\r\n        placeholder=\"起始年份\"\r\n        @change=\"beginChange\"/>\r\n    </el-col>\r\n    <el-col style=\"margin: auto; text-align: center; color: lightgray; font-size: 12px\">\r\n      至\r\n    </el-col>\r\n    <el-col>\r\n      <el-date-picker\r\n        v-model=\"endYearInternal\"\r\n        type=\"year\"\r\n        placeholder=\"终止年份\"\r\n        @change=\"endChange\"/>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'YearRangeSelector',\r\n  props: ['beginYear', 'endYear', 'expand'],\r\n  data() {\r\n    return {\r\n      beginYearInternal: this.beginYear,\r\n      endYearInternal: this.endYear,\r\n    };\r\n  },\r\n  methods: {\r\n    beginChange(value) {\r\n      if (value === null) {\r\n        this.$emit('update:beginYear', null);\r\n      } else {\r\n        this.$emit('update:beginYear', value.getFullYear());\r\n      }\r\n    },\r\n    endChange(value) {\r\n      if (value === null) {\r\n        this.$emit('update:endYear', null);\r\n      } else {\r\n        this.$emit('update:endYear', value.getFullYear());\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    beginYearInternal(value) {\r\n      if (value === null) {\r\n        this.$emit('update:beginYear', null);\r\n        return;\r\n      }\r\n      this.$emit('update:beginYear', value.getFullYear());\r\n      // if (this.$data.endYearInternal === null\r\n      //   || this.$data.endYearInternal < value) {\r\n      //   this.$data.endYearInternal = value;\r\n      //   this.$emit('update:endYear', value.getFullYear());\r\n      // }\r\n    },\r\n    endYearInternal(value) {\r\n      if (value === null) {\r\n        this.$emit('update:endYear', null);\r\n        return;\r\n      }\r\n      this.$emit('update:endYear', value.getFullYear());\r\n      // if (this.$data.beginYearInternal === null\r\n      //   || this.$data.beginYearInternal > value) {\r\n      //   this.$data.beginYearInternal = value;\r\n      //   this.$emit('update:beginYear', value.getFullYear());\r\n      // }\r\n    },\r\n    beginYear(value) {\r\n      if (value !== null) {\r\n        this.beginYearInternal = new Date(value, 1, 1);\r\n      } else {\r\n        this.beginYearInternal = null;\r\n      }\r\n    },\r\n    endYear(value) {\r\n      if (value !== null) {\r\n        this.endYearInternal = new Date(value, 1, 1);\r\n      } else {\r\n        this.endYearInternal = null;\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    mainStyle() {\r\n      if (this.expand) {\r\n        return '';\r\n      }\r\n      return 'width: 55%';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n  width: 120px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YearRangeSelector.vue?vue&type=template&id=7bfa7c13&scoped=true&\"\nimport script from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bfa7c13\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=style&index=0&id=510aac02&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{attrs:{\"span\":8,\"offset\":1}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"数据节点：\"}},[_c('el-cascader',{ref:\"cascader\",attrs:{\"id\":\"cascader\",\"options\":_vm.metaDataTree,\"change-on-select\":\"\"},model:{value:(_vm.postParams.category),callback:function ($$v) {_vm.$set(_vm.postParams, \"category\", $$v)},expression:\"postParams.category\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地区选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.region),callback:function ($$v) {_vm.$set(_vm.postParams, \"region\", $$v)},expression:\"postParams.region\"}},_vm._l((_vm.knownRegions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"粒度选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.grain),callback:function ($$v) {_vm.$set(_vm.postParams, \"grain\", $$v)},expression:\"postParams.grain\"}},_vm._l((_vm.knownGrains),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"年份选择：\"}},[_c('year-range-selector',{attrs:{\"begin-year\":_vm.postParams.beginYear,\"end-year\":_vm.postParams.endYear},on:{\"update:beginYear\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:begin-year\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:endYear\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)},\"update:end-year\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)}}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.postParams.beginYear === null ||\n                      _vm.postParams.endYear  === null ||\n                      _vm.postParams.category.length === 0},on:{\"click\":_vm.loadExceptions}},[_vm._v(\" 异常检测 \")])],1)],1)],1),_c('el-col',{attrs:{\"span\":15}},[_c('data-patch-table',{attrs:{\"display-data\":_vm.tableData}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('d2-crud',{ref:\"d2Crud\",attrs:{\"columns\":_vm.columns,\"data\":_vm.displayData,\"rowHandle\":_vm.rowHandle,\"edit-template\":_vm.editTemplate},on:{\"dialog-cancel\":_vm.handleDialogCancel,\"row-edit\":_vm.handleRowResolve,\"row-remove\":_vm.handleRowAccept}}),_c('div',{staticStyle:{\"color\":\"darkgray\",\"font-size\":\"12px\"}},[_vm._v(\" 共 \"+_vm._s(_vm.dataEntryLength)+\" 条 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <d2-crud\r\n      ref=\"d2Crud\"\r\n      :columns=\"columns\"\r\n      :data=\"displayData\"\r\n\r\n      @dialog-cancel=\"handleDialogCancel\"\r\n\r\n      :rowHandle=\"rowHandle\"\r\n      :edit-template=\"editTemplate\"\r\n      @row-edit=\"handleRowResolve\"\r\n      @row-remove=\"handleRowAccept\"\r\n\r\n    ></d2-crud>\r\n    <div style=\"color: darkgray; font-size: 12px\">\r\n      共 {{ dataEntryLength }} 条\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'DataPatchTable',\r\n  props: ['displayData'],\r\n  computed: {\r\n    dataEntryLength() {\r\n      if (this.displayData === undefined) {\r\n        return 0;\r\n      }\r\n      return this.displayData.length;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      columns: [{\r\n        title: '元数据类型',\r\n        key: 'category',\r\n      }, {\r\n        title: '数据粒度',\r\n        key: 'grain',\r\n      }, {\r\n        title: '地区',\r\n        key: 'region',\r\n      }, {\r\n        title: '键',\r\n        key: 'key',\r\n      }, {\r\n        title: '当前值',\r\n        key: 'value',\r\n      }, {\r\n        title: '更正建议',\r\n        key: 'suggest',\r\n      }],\r\n\r\n      editTemplate: {\r\n        key: {\r\n          title: '键',\r\n        },\r\n        value: {\r\n          title: '值',\r\n        },\r\n      },\r\n\r\n      rowHandle: {\r\n        remove: {\r\n          text: '接受',\r\n          size: 'small',\r\n          type: 'primary',\r\n          confirm: false,\r\n        },\r\n        edit: {\r\n          text: '更正',\r\n          size: 'small',\r\n          fixed: 'right',\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods:\r\n    {\r\n      handleDialogCancel(done) {\r\n        done();\r\n      },\r\n      handleRowResolve({ index, row }, done) {\r\n        this.$axios.post('/db/except/resolve', {\r\n          originData: this.displayData[index],\r\n          modifiedData: row,\r\n        }).then((response) => {\r\n          console.log(response);\r\n          this.$messenger.success('手动更正成功。');\r\n          this.displayData.remove(index);\r\n          done();\r\n        });\r\n      },\r\n      // eslint-disable-next-line no-unused-vars\r\n      handleRowAccept({ index, row }, done) {\r\n        this.$axios.post('/db/except/accept', {\r\n          acceptData: this.displayData[index],\r\n        }).then((response) => {\r\n          console.log(response);\r\n          this.$messenger.success('已接受更正建议。');\r\n          this.displayData.remove(index);\r\n          done();\r\n        });\r\n      },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataPatchTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataPatchTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataPatchTable.vue?vue&type=template&id=7a0e21a4&scoped=true&\"\nimport script from \"./DataPatchTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DataPatchTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7a0e21a4\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <el-row>\r\n    <el-col :span=\"8\" :offset=\"1\">\r\n      <el-form>\r\n        <el-form-item label=\"数据节点：\">\r\n          <el-cascader id=\"cascader\" :options=\"metaDataTree\"\r\n                       change-on-select\r\n                       ref=\"cascader\" v-model=\"postParams.category\"></el-cascader>\r\n        </el-form-item>\r\n        <el-form-item label=\"地区选择：\">\r\n          <el-select placeholder=\"请选择\" v-model=\"postParams.region\">\r\n            <el-option\r\n              v-for=\"item in knownRegions\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"粒度选择：\">\r\n          <el-select placeholder=\"请选择\" v-model=\"postParams.grain\">\r\n            <el-option\r\n              v-for=\"item in knownGrains\"\r\n              :key=\"item\"\r\n              :label=\"item\"\r\n              :value=\"item\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"年份选择：\">\r\n          <year-range-selector\r\n            :begin-year.sync=\"postParams.beginYear\"\r\n            :end-year.sync=\"postParams.endYear\">\r\n          </year-range-selector>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button\r\n            :disabled=\"postParams.beginYear === null ||\r\n                        postParams.endYear  === null ||\r\n                        postParams.category.length === 0\"\r\n            @click=\"loadExceptions\">\r\n            异常检测\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-col>\r\n    <el-col :span=\"15\">\r\n      <data-patch-table :display-data=\"tableData\">\r\n      </data-patch-table>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport DataPatchTable from '@/components/DataPatchTable.vue';\r\nimport YearRangeSelector from '@/components/YearRangeSelector.vue';\r\n\r\nexport default {\r\n  name: 'dataCheck',\r\n  components: { YearRangeSelector, DataPatchTable },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      metaDataTree: [],\r\n      knownRegions: [],\r\n      knownGrains: [],\r\n      postParams: {\r\n        category: [],\r\n        region: null,\r\n        grain: null,\r\n        beginYear: null,\r\n        endYear: null,\r\n      },\r\n    };\r\n  },\r\n  mounted() {\r\n    this.loadMetaData();\r\n    this.loadRegions();\r\n    this.loadGrains();\r\n  },\r\n  methods: {\r\n    loadMetaData() {\r\n      this.$axios.get('/db/metadata').then((response) => {\r\n        this.$data.metaDataTree = response.data.data;\r\n      });\r\n    },\r\n    loadExceptions() {\r\n      this.$axios.post('/db/except/query', this.$data.postParams).then((response) => {\r\n        this.tableData = response.data.data;\r\n      });\r\n    },\r\n    loadRegions() {\r\n      this.$axios.get('/region/query').then((response) => {\r\n        this.$data.knownRegions = response.data.data;\r\n      });\r\n    },\r\n    loadGrains() {\r\n      this.$axios.get('/grain/query').then((response) => {\r\n        this.$data.knownGrains = response.data.data;\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-form-item .el-select,.el-input,.el-cascader {\r\n  width: 55%;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataCheck.vue?vue&type=template&id=510aac02&scoped=true&\"\nimport script from \"./DataCheck.vue?vue&type=script&lang=js&\"\nexport * from \"./DataCheck.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataCheck.vue?vue&type=style&index=0&id=510aac02&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"510aac02\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}