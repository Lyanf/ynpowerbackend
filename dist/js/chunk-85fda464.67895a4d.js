(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85fda464"],{"298a":function(t,a,e){},"8aef":function(t,a,e){"use strict";e("298a")},c3ab:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.graphData.length||void 0!==t.graphData.yData,expression:"graphData.length !== 0 || graphData.yData !== undefined"}],staticStyle:{"margin-left":"20px"}},[e("el-row",[e("div",{staticStyle:{width:"680px",height:"300px"},attrs:{id:t.uniqueId}})]),e("el-row",[e("el-form",[e("el-form-item",[e("el-button",{on:{click:t.exportImage}},[t._v("导出图像")])],1),e("el-form-item",{attrs:{label:"显示方式："}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currentDisplayMethod,callback:function(a){t.currentDisplayMethod=a},expression:"currentDisplayMethod"}},t._l(t.displayMethods,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1)],1)},n=[],s=(e("1276"),e("ac1f"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("d3b7"),e("159b"),e("313e")),l=e("21a6");function o(t){for(var a=t.split(";base64,"),e=a[0].split(":")[1],r=window.atob(a[1]),n=r.length,s=new Uint8Array(n),l=0;l<n;++l)s[l]=r.charCodeAt(l);return new Blob([s],{type:e})}var i={data:function(){return{currentChart:void 0,graphData:[],params1st:{xTag:"xName",yTag:"yValue",xName:"",yName:""},params2nd:{xTag:"",yTag1st:"",yTag2nd:"",xName:"",yName:"",yName1st:"",yName2nd:""},displayMethods:[{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"散点图",value:"scatter"}],currentDisplayMethod:"line"}},methods:{refreshChartDirty:function(){var t=this.$data.params1st;void 0===this.currentChart&&(this.currentChart=s["init"](document.getElementById(this.uniqueId)));var a=this.graphData.xData,e=this.graphData.yData[0].data,r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:a,axisTick:{alignWithLabel:!0},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:e,name:t.yName,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top",textStyle:{color:"#ffffff",fontSize:16}}};this.currentChart.setOption(r,!0)},refreshChart:function(){var t=this.$data.params1st;void 0===this.currentChart&&(this.currentChart=s["init"](document.getElementById(this.uniqueId)));var a=[],e=[];this.graphData.forEach((function(t){t.year?a.push(t.year):t.time&&a.push(t.time),void 0!==t.predict?e.push(t.predict):void 0!==t.payload&&e.push(t.payload)}));var r={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:a,axisTick:{alignWithLabel:!0},axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:e,name:t.yName,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top",textStyle:{color:"#ffffff",fontSize:16}}};this.currentChart.setOption(r,!0)},refreshChart2nd:function(){var t=this.$data.params2nd;void 0===this.currentChart&&(this.currentChart=s["init"](document.getElementById(this.uniqueId)));var a=[],e=[],r=[];this.$data.graphData.forEach((function(n){a.push(n[t.xTag]),e.push(n[t.yTag1st]),r.push(n[t.yTag2nd])}));var n={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:a,axisTick:{alignWithLabel:!0},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:e,name:t.yName1st,type:this.$data.currentDisplayMethod},{data:r,name:t.yName2nd,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top",textStyle:{color:"#ffffff",fontSize:16}}};this.currentChart.setOption(n,!0)},exportImage:function(){if(this.currentChart){var t=this.currentChart.getDataURL(),a=o(t);Object(l["saveAs"])(a,"预测图像.png")}}},watch:{currentDisplayMethod:function(){"2nd"===this.typee?this.refreshChart2nd():"dirty"===this.typee?this.refreshChartDirty():this.refreshChart()}},computed:{uniqueId:function(){return void 0!==this.uid?this.uid:"globalChart"}},props:["typee","uid","title"]},u=i,d=e("2877"),c=Object(d["a"])(u,r,n,!1,null,"1df56db1",null);a["a"]=c.exports},f448:function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("el-row",{attrs:{type:"flex",justify:"center"}},[e("el-col",{attrs:{span:11,offset:1}},[e("DynamicSelectForm",{attrs:{"graph-data":t.graphData,"table-one-data":t.tableOneData,"table-two-data":t.tableTwoData},on:{"update:graphData":function(a){t.graphData=a},"update:graph-data":function(a){t.graphData=a},"update:tableOneData":function(a){t.tableOneData=a},"update:table-one-data":function(a){t.tableOneData=a},"update:tableTwoData":function(a){t.tableTwoData=a},"update:table-two-data":function(a){t.tableTwoData=a}}})],1),e("el-col",{attrs:{span:12}},[e("el-row",[e("ResultChart",{ref:"resultChart"})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:22,offset:1}},[e("ResultTable",{ref:"resultTable",attrs:{nomapermse:"true"}})],1)],1)],1)},n=[],s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-form",{attrs:{"label-position":"right","label-width":"auto"}},[e("el-form-item",{attrs:{label:"预测方法："}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.postParams.method,callback:function(a){t.$set(t.postParams,"method",a)},expression:"postParams.method"}},t._l(t.knownMethods,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),e("el-form-item",{attrs:{label:"历史年份："}},[e("year-range-selector",{attrs:{"begin-year":t.postParams.historyBeginYear,"end-year":t.postParams.historyEndYear},on:{"update:beginYear":function(a){return t.$set(t.postParams,"historyBeginYear",a)},"update:begin-year":function(a){return t.$set(t.postParams,"historyBeginYear",a)},"update:endYear":function(a){return t.$set(t.postParams,"historyEndYear",a)},"update:end-year":function(a){return t.$set(t.postParams,"historyEndYear",a)}}})],1),e("el-form-item",{attrs:{label:"预测年份："}},[e("year-range-selector",{attrs:{"begin-year":t.postParams.beginYear,"end-year":t.postParams.endYear},on:{"update:beginYear":function(a){return t.$set(t.postParams,"beginYear",a)},"update:begin-year":function(a){return t.$set(t.postParams,"beginYear",a)},"update:endYear":function(a){return t.$set(t.postParams,"endYear",a)},"update:end-year":function(a){return t.$set(t.postParams,"endYear",a)}}})],1),t._l(t.requiredParams,(function(a){return e("div",{key:a.key},[e("el-form-item",{attrs:{label:a.label+"："}},["int"===a.kind?e("el-input",{attrs:{step:1,type:"number",min:a.limits.min_value,max:a.limits.max_value,clearable:"",placeholder:"请输入整数数字"},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}}):"float"===a.kind?e("el-input",{attrs:{step:.01,type:"number",min:a.limits.min_value,max:a.limits.max_value,clearable:"",placeholder:"请输入数字"},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}}):a.kind.startsWith("option")?e("el-select",{attrs:{placeholder:"请选择一项"},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}},t._l(a.value,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):a.kind.startsWith("multioption")?e("el-select",{attrs:{multiple:"",placeholder:"请选择数项","multiple-limit":a.limits.max_choice},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}},t._l(a.value,(function(t){return e("el-option",{key:t,attrs:{label:t,value:t}})})),1):"bool"===a.kind?e("el-checkbox",{attrs:{"true-label":1,"false-label":0},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}}):e("el-input",{attrs:{placeholder:"请输入"},model:{value:t.postParams[a.key],callback:function(e){t.$set(t.postParams,a.key,e)},expression:"postParams[param.key]"}})],1)],1)})),e("el-form-item",{attrs:{label:"方案标签："}},[e("el-input",{attrs:{clearable:"",placeholder:"可留空"},model:{value:t.postParams.tag,callback:function(a){t.$set(t.postParams,"tag",a)},expression:"postParams.tag"}})],1),e("el-form-item",{attrs:{label:"加载方案："}},[e("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"选择标签",size:"small"},model:{value:t.currentTag,callback:function(a){t.currentTag=a},expression:"currentTag"}},t._l(t.knownTags,(function(t){return e("el-option",{key:t.tag,attrs:{label:t.tag,value:t.tag}})})),1),e("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",disabled:null===t.currentTag},on:{click:t.loadParameters}},[t._v("加载")])],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",disabled:!t.canCommitQuery},on:{click:t.performPrediction}},[t._v("预测")])],1)],2)},l=[],o=(e("159b"),e("21c9")),i={name:"DynamicIndustrySelectForm",components:{YearRangeSelector:o["a"]},data:function(){return{requiredParams:[],knownMethods:[],knownIndustries:[],graphDataInternal:[],tableOneDataInternal:[],tableTwoDataInternal:[],knownTags:[],currentTag:null,parameters:{},postParams:{industry:"",method:"",beginYear:null,endYear:null,historyBeginYear:null,historyEndYear:null,tag:null,tagType:"DYNAMIC_INDUSTRIAL"}}},methods:{loadTags:function(){var t=this;this.$axios.get("/tags/query",{params:{tagType:"DYNAMIC_INDUSTRIAL"}}).then((function(a){t.$data.knownTags=a.data.data}))},loadParameters:function(){var t=this;this.$axios.get("/params/predict/dynamic/industry",{params:{tag:this.$data.currentTag}}).then((function(a){t.$data.postParams=a.data.data}))},loadIndustries:function(){var t=this;this.$axios.get("/industry/query").then((function(a){t.$data.knownIndustries=a.data.data}))},loadIndustrialMethods:function(){var t=this;this.$axios.get("/method/industry/query").then((function(a){t.$data.knownMethods=a.data.data}))},performPrediction:function(){var t=this,a=Object.assign(this.$data.postParams,this.$data.parameters);a.StartYear=a.historyBeginYear,a.EndYear=a.historyEndYear,a.PreStartYear=a.beginYear,a.PreEndYear=a.endYear,this.$axios.post("/predict/industry/single",a).then((function(a){t.$data.graphDataInternal=a.data.data.tableTwoData,t.$data.tableOneDataInternal=a.data.data.tableOneData,t.$data.tableTwoDataInternal=a.data.data.tableTwoData}))}},mounted:function(){this.loadIndustries(),this.loadIndustrialMethods(),this.loadTags()},computed:{canCommitQuery:function(){var t=this.$data.postParams;return null!==t.beginYear&&null!==t.endYear&&(null!==t.historyBeginYear&&null!==t.historyEndYear)}},watch:{graphDataInternal:function(t){this.$emit("update:graphData",t)},tableOneDataInternal:function(t){this.$emit("update:tableOneData",t)},tableTwoDataInternal:function(t){this.$emit("update:tableTwoData",t)},"postParams.method":function(t){var a=this;this.$data.requiredParams=[],this.$axios.get("/get/args",{params:{method:t}}).then((function(t){t.data.data.para.forEach((function(t){"StartYear"===t.key||"EndYear"===t.key||"PreStartYear"===t.key||"PreEndYear"===t.key||(a.$data.requiredParams.push(t),void 0!==t.default&&a.$set(a.postParams,t.key,t.default))}))}))}},props:["graphData","tableOneData","tableTwoData"]},u=i,d=(e("8aef"),e("2877")),c=Object(d["a"])(u,s,l,!1,null,"7320aed3",null),p=c.exports,f=e("c3ab"),h=e("f70a"),m={name:"IndustrySinglePrediction",components:{ResultTable:h["a"],ResultChart:f["a"],DynamicSelectForm:p},data:function(){return{graphData:[],tableOneData:[],tableTwoData:[]}},watch:{graphData:function(t){this.$refs.resultChart.graphData=t,this.$refs.resultChart.refreshChart()},tableOneData:function(t){this.$refs.resultTable.tableOneData=t},tableTwoData:function(t){this.$refs.resultTable.tableTwoData=t}}},y=m,b=Object(d["a"])(y,r,n,!1,null,"0c3ef5b8",null);a["default"]=b.exports},f70a:function(t,a,e){"use strict";var r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-form",[void 0===t.nomapermse&&0!==t.tableOneData.length?e("el-form-item",{attrs:{label:"评价指标表："}},[e("el-table",{attrs:{data:t.tableOneData}},[e("el-table-column",{attrs:{prop:"mape",label:"MAPE（%）"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(a.row.mape.toFixed(2))+" ")]}}],null,!1,3612083124)}),e("el-table-column",{attrs:{prop:"rmse",label:"RMSE"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(a.row.rmse.toFixed(2))+" ")]}}],null,!1,616966500)})],1)],1):t._e(),void 0===t.nomapermse&&0!==t.tableOneData.length?e("el-form-item",[e("el-button",{on:{click:t.exportTableOneSheet}},[t._v("导出评价指标表")])],1):t._e(),0!==t.tableTwoData.length?e("el-form-item",{attrs:{label:"年份 − 预测值表："}},[e("el-table",{attrs:{data:t.tableTwoData}},[e("el-table-column",{attrs:{prop:"year",label:"年份"}}),e("el-table-column",{attrs:{prop:"predict",label:"预测值（MW）"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v(" "+t._s(a.row.predict.toFixed(0))+" ")]}}],null,!1,4170251218)})],1)],1):t._e(),0!==t.tableTwoData.length?e("el-form-item",[e("el-button",{on:{click:t.exportTableTwoSheet}},[t._v("导出预测结果表")])],1):t._e()],1)},n=[],s=e("f59f"),l=e("21a6"),o={name:"ResultTable",props:["nomapermse"],data:function(){return{tableOneData:[],tableTwoData:[]}},methods:{exportTableSheet:function(t,a){var e=s["parse"](t,{fields:a}),r=new Blob([e],{type:"text/csv"});Object(l["saveAs"])(r,"预测结果表.csv")},exportTableOneSheet:function(){this.exportTableSheet(this.$data.tableOneData,["mape","rmse"])},exportTableTwoSheet:function(){this.exportTableSheet(this.$data.tableTwoData,["year","predict"])}}},i=o,u=e("2877"),d=Object(u["a"])(i,r,n,!1,null,"22e16c68",null);a["a"]=d.exports}}]);
//# sourceMappingURL=chunk-85fda464.67895a4d.js.map