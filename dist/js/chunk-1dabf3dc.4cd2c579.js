(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dabf3dc"],{"19d7":function(e,a,t){},"21c9":function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-row",{style:e.mainStyle,attrs:{type:"flex",justify:"left"}},[t("el-col",[t("el-date-picker",{attrs:{type:"year",placeholder:"起始年份"},on:{change:e.beginChange},model:{value:e.beginYearInternal,callback:function(a){e.beginYearInternal=a},expression:"beginYearInternal"}})],1),t("el-col",{staticStyle:{margin:"auto","text-align":"center",color:"lightgray","font-size":"12px"}},[e._v(" 至 ")]),t("el-col",[t("el-date-picker",{attrs:{type:"year",placeholder:"终止年份"},on:{change:e.endChange},model:{value:e.endYearInternal,callback:function(a){e.endYearInternal=a},expression:"endYearInternal"}})],1)],1)},n=[],l={name:"YearRangeSelector",props:["beginYear","endYear","expand"],data:function(){return{beginYearInternal:this.beginYear,endYearInternal:this.endYear}},methods:{beginChange:function(e){null===e?this.$emit("update:beginYear",null):this.$emit("update:beginYear",e.getFullYear())},endChange:function(e){null===e?this.$emit("update:endYear",null):this.$emit("update:endYear",e.getFullYear())}},watch:{beginYearInternal:function(e){null!==e?this.$emit("update:beginYear",e.getFullYear()):this.$emit("update:beginYear",null)},endYearInternal:function(e){null!==e?this.$emit("update:endYear",e.getFullYear()):this.$emit("update:endYear",null)},beginYear:function(e){this.beginYearInternal=null!==e?new Date(e,1,1):null},endYear:function(e){this.endYearInternal=null!==e?new Date(e,1,1):null}},computed:{mainStyle:function(){return this.expand?"":"width: 55%"}}},s=l,o=(t("6e83"),t("2877")),i=Object(o["a"])(s,r,n,!1,null,"7bfa7c13",null);a["a"]=i.exports},3111:function(e,a,t){"use strict";t("19d7")},3311:function(e,a,t){"use strict";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-row",{attrs:{type:"flex",justify:"center"}},[t("el-col",{attrs:{span:11,offset:1}},[t("PredictSelectForm",{attrs:{placeOrIndustry:"place","graph-data":e.graphData,"table-one-data":e.tableOneData,"table-two-data":e.tableTwoData},on:{"update:graphData":function(a){e.graphData=a},"update:graph-data":function(a){e.graphData=a},"update:tableOneData":function(a){e.tableOneData=a},"update:table-one-data":function(a){e.tableOneData=a},"update:tableTwoData":function(a){e.tableTwoData=a},"update:table-two-data":function(a){e.tableTwoData=a}}})],1),t("el-col",{attrs:{span:12}},[t("el-row",[t("ResultChart",{ref:"resultChart"})],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:22,offset:1}},[t("ResultTable",{ref:"resultTable"})],1)],1)],1)},n=[],l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-form",{attrs:{"label-position":"right","label-width":"auto"}},["place"===e.placeOrIndustry?t("el-form-item",{attrs:{label:"预测地区："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.postParams.region,callback:function(a){e.$set(e.postParams,"region",a)},expression:"postParams.region"}},e._l(e.predictRegions,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):e._e(),"industry"===e.placeOrIndustry?t("el-form-item",{attrs:{label:"预测行业："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.postParams.industry,callback:function(a){e.$set(e.postParams,"industry",a)},expression:"postParams.industry"}},e._l(e.predictIndustries,(function(e){return t("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):e._e(),e.longTerm?e._e():t("el-form-item",{attrs:{label:"预测方法："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.postParams.method,callback:function(a){e.$set(e.postParams,"method",a)},expression:"postParams.method"}},e._l(e.allMethods,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),t("el-form-item",{attrs:{label:"历史年份："}},[t("year-range-selector",{attrs:{"begin-year":e.postParams.historyBeginYear,"end-year":e.postParams.historyEndYear},on:{"update:beginYear":function(a){return e.$set(e.postParams,"historyBeginYear",a)},"update:begin-year":function(a){return e.$set(e.postParams,"historyBeginYear",a)},"update:endYear":function(a){return e.$set(e.postParams,"historyEndYear",a)},"update:end-year":function(a){return e.$set(e.postParams,"historyEndYear",a)}}})],1),t("el-form-item",{attrs:{label:"预测年份："}},[t("year-range-selector",{attrs:{"begin-year":e.postParams.beginYear,"end-year":e.postParams.endYear},on:{"update:beginYear":function(a){return e.$set(e.postParams,"beginYear",a)},"update:begin-year":function(a){return e.$set(e.postParams,"beginYear",a)},"update:endYear":function(a){return e.$set(e.postParams,"endYear",a)},"update:end-year":function(a){return e.$set(e.postParams,"endYear",a)}}})],1),e._l(e.requiredParams,(function(a){return t("div",{key:a.key},[t("el-form-item",{attrs:{label:a.label+"："}},["int"===a.kind?t("el-input",{attrs:{step:1,type:"number",clearable:"",placeholder:"请输入整数数字"},model:{value:e.postParams[a.key],callback:function(t){e.$set(e.postParams,a.key,t)},expression:"postParams[param.key]"}}):"float"===a.kind?t("el-input",{attrs:{step:.01,type:"number",clearable:"",placeholder:"请输入数字"},model:{value:e.postParams[a.key],callback:function(t){e.$set(e.postParams,a.key,t)},expression:"postParams[param.key]"}}):"option"===a.kind?t("el-select",{attrs:{placeholder:"请选择一项"},model:{value:e.postParams[a.key],callback:function(t){e.$set(e.postParams,a.key,t)},expression:"postParams[param.key]"}},e._l(a.value,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1):"multioption"===a.kind?t("el-select",{attrs:{multiple:"",placeholder:"请选择数项"},model:{value:e.postParams[a.key],callback:function(t){e.$set(e.postParams,a.key,t)},expression:"postParams[param.key]"}},e._l(a.value,(function(e){return t("el-option",{key:e,attrs:{label:e,value:e}})})),1):t("el-input",{attrs:{placeholder:"请输入"},model:{value:e.postParams[a.key],callback:function(t){e.$set(e.postParams,a.key,t)},expression:"postParams[param.key]"}})],1)],1)})),t("el-form-item",{attrs:{label:"方案标签："}},[t("el-input",{attrs:{clearable:"",placeholder:"可留空"},model:{value:e.postParams.tag,callback:function(a){e.$set(e.postParams,"tag",a)},expression:"postParams.tag"}})],1),t("el-form-item",{attrs:{label:"加载方案："}},[t("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"选择标签",size:"small"},model:{value:e.currentTag,callback:function(a){e.currentTag=a},expression:"currentTag"}},e._l(e.knownTags,(function(e){return t("el-option",{key:e.id,attrs:{label:e.id,value:e.id}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",disabled:null===e.currentTag},on:{click:e.loadParameters}},[e._v("加载")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:!e.canCommitQuery},on:{click:e.performPrediction}},[e._v("预测")])],1)],2)},s=[],o=(t("4160"),t("b0c0"),t("159b"),t("340d")),i=t("21c9"),u={name:"SinglePredictSelectForm",components:{YearRangeSelector:i["a"]},data:function(){return{predictRegions:[],predictIndustries:[],variadicFactors:[],graphDataInternal:[],tableOneDataInternal:[],tableTwoDataInternal:[],requiredParams:[],parameters:{},postParams:{historyBeginYear:null,historyEndYear:null,beginYear:null,endYear:null,region:"",industry:"",method:"",factor1:{name:"",hasValue:!0,value:.5},factor2:{name:"",hasValue:!0,value:.5},tag:null,tagType:"STATIC_REGIONAL"},originalAllMethodsForPlace:[],originalAllMethodsForIndustry:[],knownTags:[],currentTag:null}},computed:{allMethods:function(){return"place"===this.placeOrIndustry?Object(o["a"])(this.originalAllMethodsForPlace):"industry"===this.placeOrIndustry?Object(o["a"])(this.originalAllMethodsForIndustry):[]},canCommitQuery:function(){var e=this.$data.postParams;return null!==e.beginYear&&null!==e.endYear&&(null!==e.historyBeginYear&&null!==e.historyEndYear&&(0!==e.region.length&&(!(!this.longTerm&&0===e.method.length)&&(!!this.validateFactor(e.factor1)&&(!this.shouldDisplaySecondFactor||e.factor1.name!==e.factor2.name&&this.validateFactor(e.factor2))))))},shouldDisplaySecondFactor:function(){return"二元一次函数"===this.$data.postParams.method}},mounted:function(){"place"===this.placeOrIndustry?(this.loadRegions(),this.loadRegionalMethods()):(this.loadIndustries(),this.loadIndustrialMethods()),this.loadFactors(),this.loadTags()},methods:{loadTags:function(){var e=this;this.$axios.get("/tags/query",{params:{tagType:"STATIC_REGIONAL"}}).then((function(a){e.$data.knownTags=a.data.data}))},loadParameters:function(){var e=this;this.$axios.get("/params/predict/static/region",{params:{tag:this.$data.currentTag}}).then((function(a){e.$data.postParams=a.data.data}))},loadRegions:function(){var e=this;this.$axios.get("/region/query").then((function(a){e.$data.predictRegions=a.data.data}))},loadIndustries:function(){var e=this;this.$axios.get("/industry/query").then((function(a){e.$data.predictIndustries=a.data.data}))},loadFactors:function(){var e=this;this.$axios.get("/factor/query").then((function(a){e.$data.variadicFactors=a.data.data}))},loadIndustrialMethods:function(){var e=this;this.$axios.get("/method/industry/query").then((function(a){e.$data.originalAllMethodsForIndustry=a.data.data}))},loadRegionalMethods:function(){var e=this;this.$axios.get("/method/region/query").then((function(a){e.$data.originalAllMethodsForPlace=a.data.data}))},validateFactor:function(e){return 0!==e.name.length},performPrediction:function(){var e=this,a=Object.assign(this.$data.postParams,this.$data.parameters);a.StartYear=a.historyBeginYear,a.EndYear=a.historyEndYear,a.PreStartYear=a.beginYear,a.PreEndYear=a.endYear,a["city*"]=a.region,this.$axios.post("/predict/region/single",a).then((function(a){e.$data.graphDataInternal=a.data.data.graphData,e.$data.tableOneDataInternal=a.data.data.tableOneData,e.$data.tableTwoDataInternal=a.data.data.tableTwoData}))}},watch:{graphDataInternal:function(e){this.$emit("update:graphData",e)},tableOneDataInternal:function(e){this.$emit("update:tableOneData",e)},tableTwoDataInternal:function(e){this.$emit("update:tableTwoData",e)},"postParams.method":function(e){var a=this;this.$data.requiredParams=[],this.$axios.get("/get/args",{params:{method:e}}).then((function(e){e.data.data.para.forEach((function(e){"StartYear"===e.key||"EndYear"===e.key||"PreStartYear"===e.key||"PreEndYear"===e.key||"city*"===e.key||a.$data.requiredParams.push(e)}))}))}},props:["placeOrIndustry","longTerm","graphData","tableOneData","tableTwoData"]},c=u,d=(t("3111"),t("2877")),p=Object(d["a"])(c,l,s,!1,null,"08ab78ed",null),h=p.exports,m=t("c3ab"),f=t("f70a"),b={name:"PlaceSinglePrediction",components:{ResultTable:f["a"],ResultChart:m["a"],PredictSelectForm:h},data:function(){return{graphData:[],tableOneData:[],tableTwoData:[]}},watch:{graphData:function(e){this.$refs.resultChart.graphData=e,this.$refs.resultChart.refreshChart()},tableOneData:function(e){this.$refs.resultTable.tableOneData=e},tableTwoData:function(e){this.$refs.resultTable.tableTwoData=e}}},g=b,y=Object(d["a"])(g,r,n,!1,null,"7c44ffc0",null);a["default"]=y.exports},"340d":function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));t("d81d");function r(e){return e.map((function(e){return{key:e,label:e,value:e}}))}},"6e83":function(e,a,t){"use strict";t("e4af")},c3ab:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.graphData.length>0,expression:"graphData.length > 0"}],staticStyle:{"margin-left":"20px"}},[t("el-row",[t("div",{staticStyle:{width:"680px",height:"300px"},attrs:{id:e.uniqueId}})]),t("el-row",[t("el-form",[t("el-form-item",[t("el-button",{on:{click:e.exportImage}},[e._v("导出图像")])],1),t("el-form-item",{attrs:{label:"显示方式："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.currentDisplayMethod,callback:function(a){e.currentDisplayMethod=a},expression:"currentDisplayMethod"}},e._l(e.displayMethods,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1)},n=[],l=(t("4160"),t("d3b7"),t("ac1f"),t("1276"),t("5cc6"),t("9a8c"),t("a975"),t("735e"),t("c1ac"),t("d139"),t("3a7b"),t("d5d6"),t("82f8"),t("e91f"),t("60bd"),t("5f96"),t("3280"),t("3fcc"),t("ca91"),t("25a1"),t("cd26"),t("3c5d"),t("2954"),t("649e"),t("219c"),t("170b"),t("b39a"),t("72f7"),t("159b"),t("313e")),s=t("21a6");function o(e){for(var a=e.split(";base64,"),t=a[0].split(":")[1],r=window.atob(a[1]),n=r.length,l=new Uint8Array(n),s=0;s<n;++s)l[s]=r.charCodeAt(s);return new Blob([l],{type:t})}var i={data:function(){return{currentChart:void 0,graphData:[],params1st:{xTag:"xName",yTag:"yValue",xName:"",yName:""},params2nd:{xTag:"",yTag1st:"",yTag2nd:"",xName:"",yName:"",yName1st:"",yName2nd:""},displayMethods:[{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"散点图",value:"scatter"}],currentDisplayMethod:"line"}},methods:{refreshChart:function(){var e=this.$data.params1st;void 0===this.currentChart&&(this.currentChart=l["init"](document.getElementById(this.uniqueId)));var a=[],t=[];this.$data.graphData.forEach((function(r){a.push(r[e.xTag]),t.push(r[e.yTag])}));var r={xAxis:{type:"category",name:e.xName,data:a},yAxis:{type:"value",name:e.yName},series:[{data:t,name:e.yName,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top"}};this.currentChart.setOption(r,!0)},refreshChart2nd:function(){var e=this.$data.params2nd;void 0===this.currentChart&&(this.currentChart=l["init"](document.getElementById(this.uniqueId)));var a=[],t=[],r=[];this.$data.graphData.forEach((function(n){a.push(n[e.xTag]),t.push(n[e.yTag1st]),r.push(n[e.yTag2nd])}));var n={xAxis:{type:"category",name:e.xName,data:a},yAxis:{type:"value",name:e.yName},series:[{data:t,name:e.yName1st,type:this.$data.currentDisplayMethod},{data:r,name:e.yName2nd,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top"}};this.currentChart.setOption(n,!0)},exportImage:function(){if(this.currentChart){var e=this.currentChart.getDataURL(),a=o(e);Object(s["saveAs"])(a,"chart.png")}}},watch:{currentDisplayMethod:function(){"2nd"===this.typee?this.refreshChart2nd():this.refreshChart()}},computed:{uniqueId:function(){return void 0!==this.uid?this.uid:"globalChart"}},props:["typee","uid"]},u=i,c=t("2877"),d=Object(c["a"])(u,r,n,!1,null,"5ad5f736",null);a["a"]=d.exports},d81d:function(e,a,t){"use strict";var r=t("23e7"),n=t("b727").map,l=t("1dde"),s=t("ae40"),o=l("map"),i=s("map");r({target:"Array",proto:!0,forced:!o||!i},{map:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},e4af:function(e,a,t){},f70a:function(e,a,t){"use strict";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-form",[t("el-form-item",{attrs:{label:"评价指标表："}},[t("el-table",{attrs:{data:e.tableOneData}},[t("el-table-column",{attrs:{prop:"index",label:"评价指标"}}),t("el-table-column",{attrs:{prop:"r2",label:"R2"}}),t("el-table-column",{attrs:{prop:"mape",label:"MAPE"}}),t("el-table-column",{attrs:{prop:"rmse",label:"RMSE"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{disabled:0===e.tableOneData.length},on:{click:e.exportTableOneSheet}},[e._v("导出评价指标表")])],1),t("el-form-item",{attrs:{label:"年份 − 预测值表："}},[t("el-table",{attrs:{data:e.tableTwoData}},[t("el-table-column",{attrs:{prop:"year",label:"年份"}}),t("el-table-column",{attrs:{prop:"predict",label:"预测值（MVW）"}})],1)],1),t("el-form-item",[t("el-button",{attrs:{disabled:0===e.tableTwoData.length},on:{click:e.exportTableTwoSheet}},[e._v("导出预测结果表")])],1)],1)},n=[],l=t("f59f"),s=t("21a6"),o={name:"ResultTable",data:function(){return{tableOneData:[],tableTwoData:[]}},methods:{exportTableSheet:function(e,a){var t=l["parse"](e,{fields:a}),r=new Blob([t],{type:"text/csv"});Object(s["saveAs"])(r,"database.csv")},exportTableOneSheet:function(){this.exportTableSheet(this.$data.tableOneData,["index","r2","mape","rmse"])},exportTableTwoSheet:function(){this.exportTableSheet(this.$data.tableTwoData,["year","predict"])}}},i=o,u=t("2877"),c=Object(u["a"])(i,r,n,!1,null,"96eed4ac",null);a["a"]=c.exports}}]);
//# sourceMappingURL=chunk-1dabf3dc.4cd2c579.js.map