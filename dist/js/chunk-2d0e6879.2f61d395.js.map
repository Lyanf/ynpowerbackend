{"version":3,"sources":["webpack:///./src/views/PredictResultDisplay.vue?4bb5","webpack:///src/views/PredictResultDisplay.vue","webpack:///./src/views/PredictResultDisplay.vue?bbbb","webpack:///./src/views/PredictResultDisplay.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","postParams","callback","$$v","$set","expression","_l","item","key","id","staticStyle","_v","_s","typeName","tagType","label","canCommitQuery","on","performCompare","exportImage","currentDisplayMethod","staticRenderFns","base64ToBlob","code","uInt8Array","i","raw","charCodeAt","Blob","name","data","tags","trait","currentChart","undefined","displayData","displayMethods","knownTags","knownTraits","MINING","STATIC_REGIONAL","DYNAMIC_INDUSTRIAL","MIX","LONGTERM","BIGUSER","SOKU","CLAMP","INTERP","YEARCONT","mounted","loadTags","computed","params","length","methods","$axios","get","then","refreshChart","echarts","window","onresize","resize","yData","forEach","series","push","elem","tag","type","xAxis","xName","xData","axisTick","alignWithLabel","yAxis","yName","legend","orient","x","y","setOption","initializeOption","style","width","post","$data","watch","component"],"mappings":"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","file":"js/chunk-2d0e6879.2f61d395.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":5,\"offset\":1}},[_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"对比方案标签：\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.postParams.tags),callback:function ($$v) {_vm.$set(_vm.postParams, \"tags\", $$v)},expression:\"postParams.tags\"}},_vm._l((_vm.knownTags),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.id}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.id))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\"}},[_vm._v(_vm._s(_vm.typeName[item.tagType]))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"对比特征：\"}},[_c('el-select',{model:{value:(_vm.postParams.trait),callback:function ($$v) {_vm.$set(_vm.postParams, \"trait\", $$v)},expression:\"postParams.trait\"}},_vm._l((_vm.knownTraits),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.canCommitQuery},on:{\"click\":_vm.performCompare}},[_vm._v(\"对比\")])],1)],1)],1),_c('el-col',{attrs:{\"span\":17,\"offset\":1}},[_c('el-row',[_c('div',{staticStyle:{\"height\":\"500px\"},attrs:{\"id\":\"compareChart\"}})]),_c('el-row',[_c('el-form',[_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.exportImage}},[_vm._v(\"导出图像\")])],1),_c('el-form-item',{attrs:{\"label\":\"显示方式：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.currentDisplayMethod),callback:function ($$v) {_vm.currentDisplayMethod=$$v},expression:\"currentDisplayMethod\"}},_vm._l((_vm.displayMethods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-row type=\"flex\" justify=\"center\">\n      <el-col :span=\"5\" :offset=\"1\">\n        <el-form label-position=\"right\" label-width=\"auto\">\n          <el-form-item label=\"对比方案标签：\">\n            <el-select v-model=\"postParams.tags\" multiple>\n              <el-option v-for=\"item in knownTags\"\n                         :key=\"item.id\"\n                         :value=\"item.id\">\n                <span style=\"float: left\">{{ item.id }}</span>\n                <span style=\"float: right; color: #8492a6;\">{{ typeName[item.tagType] }}</span>\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"对比特征：\">\n            <el-select v-model=\"postParams.trait\">\n              <el-option v-for=\"item in knownTraits\"\n                         :key=\"item.value\"\n                         :label=\"item.label\"\n                         :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"performCompare\"\n                       type=\"primary\"\n                       :disabled=\"!canCommitQuery\">对比</el-button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n      <el-col :span=\"17\" :offset=\"1\">\n        <el-row>\n          <div id=\"compareChart\" style=\"height: 500px\"></div>\n        </el-row>\n        <el-row>\n          <el-form>\n            <el-form-item>\n              <el-button v-on:click=\"exportImage\">导出图像</el-button>\n            </el-form-item>\n            <el-form-item label=\"显示方式：\">\n              <el-select placeholder=\"请选择\" v-model=\"currentDisplayMethod\">\n                <el-option\n                  v-for=\"item in displayMethods\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n        </el-row>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\nimport { saveAs } from 'file-saver';\n\nfunction base64ToBlob(code) {\n  const parts = code.split(';base64,');\n  const contentType = parts[0].split(':')[1];\n  const raw = window.atob(parts[1]);\n  const rawLength = raw.length;\n\n  const uInt8Array = new Uint8Array(rawLength);\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < rawLength; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n  return new Blob([uInt8Array], { type: contentType });\n}\n\nexport default {\n  name: 'PredictResultDisplay',\n  data() {\n    return {\n      postParams: {\n        tags: [],\n        trait: null,\n      },\n      currentChart: undefined,\n      displayData: [],\n      displayMethods: [\n        {\n          label: '折线图',\n          value: 'line',\n        },\n        {\n          label: '柱状图',\n          value: 'bar',\n        },\n        {\n          label: '散点图',\n          value: 'scatter',\n        },\n      ],\n      knownTags: [],\n      knownTraits: [\n        {\n          label: 'R2 值',\n          value: 'R2',\n        },\n        {\n          label: 'MAPE 值',\n          value: 'MAPE',\n        },\n        {\n          label: 'RMSE 值',\n          value: 'RMSE',\n        },\n        {\n          label: '预测功率值（MVW）',\n          value: 'predictMVW',\n        },\n      ],\n      typeName: {\n        MINING: '数据挖掘方案',\n        STATIC_REGIONAL: '地区单预测方案',\n        DYNAMIC_INDUSTRIAL: '行业单预测方案',\n        MIX: '组合预测方案',\n        LONGTERM: '远期规划预测方案',\n        BIGUSER: '大用户预测方案',\n        SOKU: '负荷特性预测方案',\n        CLAMP: '负荷特性预测方案',\n        INTERP: '负荷特性预测方案',\n        YEARCONT: '负荷特性预测方案',\n      },\n      currentDisplayMethod: 'line',\n    };\n  },\n  mounted() {\n    this.loadTags();\n  },\n  computed: {\n    canCommitQuery() {\n      const params = this.$data.postParams;\n      return !(params.tags.length < 2 || params.trait === null);\n    },\n  },\n  methods: {\n    exportImage() {\n      if (!this.currentChart) {\n        return;\n      }\n      const content = this.currentChart.getDataURL();\n      const blob = base64ToBlob(content);\n      saveAs(blob, '预测图像.png');\n    },\n    loadTags() {\n      this.$axios.get('/predict/results/query').then((response) => {\n        this.$data.knownTags = response.data.data;\n      });\n    },\n    refreshChart() {\n      const data = this.$data.displayData;\n      if (this.currentChart === undefined) {\n        this.currentChart = echarts.init(document.getElementById('compareChart'));\n        window.onresize = this.currentChart.resize;\n      }\n      const series = [];\n      data.yData.forEach((elem) => {\n        series.push({\n          data: elem.data,\n          name: elem.tag,\n          type: this.$data.currentDisplayMethod,\n        });\n      });\n      const initializeOption = {\n        xAxis: {\n          type: 'category',\n          name: data.xName,\n          data: data.xData,\n          axisTick: {\n            alignWithLabel: true,\n          },\n        },\n        yAxis: {\n          type: 'value',\n          name: data.yName,\n        },\n        series,\n        legend: {\n          // orient 设置布局方式，默认水平布局，可选值：'horizontal'（水平） ¦ 'vertical'（垂直）\n          orient: 'horizontal',\n          // x 设置水平安放位置，默认全图居中，可选值：'center' ¦ 'left' ¦ 'right' ¦ {number}（x坐标，单位px）\n          x: 'center',\n          // y 设置垂直安放位置，默认全图顶端，可选值：'top' ¦ 'bottom' ¦ 'center' ¦ {number}（y坐标，单位px）\n          y: 'top',\n        },\n      };\n      this.currentChart.setOption(initializeOption, true);\n      this.currentChart.style.width = `${document.body.clientWidth * 0.6}px`;\n    },\n    performCompare() {\n      this.$axios.post('/predict/results/compare', this.$data.postParams).then((response) => {\n        this.$data.displayData = response.data.data;\n        this.refreshChart();\n      });\n    },\n  },\n  watch: {\n    currentDisplayMethod() {\n      this.refreshChart();\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PredictResultDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PredictResultDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PredictResultDisplay.vue?vue&type=template&id=5030ee0e&scoped=true&\"\nimport script from \"./PredictResultDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./PredictResultDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5030ee0e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}