{"version":3,"sources":["webpack:///./src/views/DataBaseCRUD.vue?b861","webpack:///src/views/DataBaseCRUD.vue","webpack:///./src/views/DataBaseCRUD.vue?6967","webpack:///./src/views/DataBaseCRUD.vue","webpack:///./src/components/MetaDataTree.vue?0de4","webpack:///./src/components/YearRangeSelector.vue?f616","webpack:///src/components/YearRangeSelector.vue","webpack:///./src/components/YearRangeSelector.vue?85dd","webpack:///./src/components/YearRangeSelector.vue","webpack:///./src/components/DataCRUDTable.vue?223d","webpack:///src/components/DataCRUDTable.vue","webpack:///./src/components/DataCRUDTable.vue?f77c","webpack:///./src/components/DataCRUDTable.vue","webpack:///./src/components/YearRangeSelector.vue?9635","webpack:///./src/components/MetaDataTree.vue?2fb6","webpack:///src/components/MetaDataTree.vue","webpack:///./src/components/MetaDataTree.vue?69b2","webpack:///./src/components/MetaDataTree.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","category","tableData","on","$event","staticRenderFns","name","components","DataCRUDTable","MetaDataTree","data","component","style","beginChange","model","value","callback","$$v","beginYearInternal","expression","staticStyle","_v","endChange","endYearInternal","props","beginYear","endYear","methods","$emit","getFullYear","watch","Date","computed","mainStyle","expand","addRow","dataEntryLength","exportTableSheet","ref","columns","displayData","addTemplate","rowHandle","editTemplate","handleRowAdd","handleDialogCancel","handleRowEdit","handleRowRemove","_s","undefined","length","title","key","edit","text","size","remove","fixed","confirm","metaDataTree","postParams","$set","_l","item","canMakeQuery","performQuery","YearRangeSelector","knownRegions","knownGrains","dataResultInternal","dataResult","region","grain","params","loadMetaData","$axios","get","then","loadRegions","loadGrains","post","$data","mounted"],"mappings":"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","file":"js/chunk-7618db8e.f225a576.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{attrs:{\"offset\":1,\"span\":9}},[_c('MetaDataTree',{attrs:{\"category\":_vm.category,\"data-result\":_vm.tableData},on:{\"update:category\":function($event){_vm.category=$event},\"update:dataResult\":function($event){_vm.tableData=$event},\"update:data-result\":function($event){_vm.tableData=$event}}})],1),_c('el-col',{attrs:{\"span\":14}},[_c('DataCRUDTable',{attrs:{\"category\":_vm.category,\"display-data\":_vm.tableData},on:{\"update:category\":function($event){_vm.category=$event},\"update:displayData\":function($event){_vm.tableData=$event},\"update:display-data\":function($event){_vm.tableData=$event}}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-row>\r\n    <el-col :offset=\"1\" :span=\"9\">\r\n      <MetaDataTree :category.sync=\"category\" :data-result.sync=\"tableData\"></MetaDataTree>\r\n    </el-col>\r\n    <el-col :span=\"14\">\r\n      <DataCRUDTable :category.sync=\"category\" :display-data.sync=\"tableData\"></DataCRUDTable>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n<script>\r\nimport MetaDataTree from '@/components/MetaDataTree.vue';\r\nimport DataCRUDTable from '@/components/DataCRUDTable.vue';\r\n\r\nexport default {\r\n  name: 'DataBaseCRUD',\r\n  components: {\r\n    DataCRUDTable,\r\n    MetaDataTree,\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [],\r\n      category: [],\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBaseCRUD.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBaseCRUD.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataBaseCRUD.vue?vue&type=template&id=17ff74ae&scoped=true&\"\nimport script from \"./DataBaseCRUD.vue?vue&type=script&lang=js&\"\nexport * from \"./DataBaseCRUD.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17ff74ae\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=style&index=0&id=347b9f72&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{style:(_vm.mainStyle),attrs:{\"type\":\"flex\",\"justify\":\"left\"}},[_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"起始年份\"},on:{\"change\":_vm.beginChange},model:{value:(_vm.beginYearInternal),callback:function ($$v) {_vm.beginYearInternal=$$v},expression:\"beginYearInternal\"}})],1),_c('el-col',{staticStyle:{\"margin\":\"auto\",\"text-align\":\"center\",\"color\":\"lightgray\",\"font-size\":\"12px\"}},[_vm._v(\" 至 \")]),_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"终止年份\"},on:{\"change\":_vm.endChange},model:{value:(_vm.endYearInternal),callback:function ($$v) {_vm.endYearInternal=$$v},expression:\"endYearInternal\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <el-row type=\"flex\" justify=\"left\" :style=\"mainStyle\">\r\n<!--    <div>-->\r\n<!--      {{ this.$data }}-->\r\n<!--    </div>-->\r\n<!--    <div>-->\r\n<!--      {{ this.$props }}-->\r\n<!--    </div>-->\r\n    <el-col>\r\n      <el-date-picker\r\n        v-model=\"beginYearInternal\"\r\n        type=\"year\"\r\n        placeholder=\"起始年份\"\r\n        @change=\"beginChange\"/>\r\n    </el-col>\r\n    <el-col style=\"margin: auto; text-align: center; color: lightgray; font-size: 12px\">\r\n      至\r\n    </el-col>\r\n    <el-col>\r\n      <el-date-picker\r\n        v-model=\"endYearInternal\"\r\n        type=\"year\"\r\n        placeholder=\"终止年份\"\r\n        @change=\"endChange\"/>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'YearRangeSelector',\r\n  props: ['beginYear', 'endYear', 'expand'],\r\n  data() {\r\n    return {\r\n      beginYearInternal: this.beginYear,\r\n      endYearInternal: this.endYear,\r\n    };\r\n  },\r\n  methods: {\r\n    beginChange(value) {\r\n      if (value === null) {\r\n        this.$emit('update:beginYear', null);\r\n      } else {\r\n        this.$emit('update:beginYear', value.getFullYear());\r\n      }\r\n    },\r\n    endChange(value) {\r\n      if (value === null) {\r\n        this.$emit('update:endYear', null);\r\n      } else {\r\n        this.$emit('update:endYear', value.getFullYear());\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    beginYearInternal(value) {\r\n      if (value === null) {\r\n        this.$emit('update:beginYear', null);\r\n        return;\r\n      }\r\n      this.$emit('update:beginYear', value.getFullYear());\r\n      // if (this.$data.endYearInternal === null\r\n      //   || this.$data.endYearInternal < value) {\r\n      //   this.$data.endYearInternal = value;\r\n      //   this.$emit('update:endYear', value.getFullYear());\r\n      // }\r\n    },\r\n    endYearInternal(value) {\r\n      if (value === null) {\r\n        this.$emit('update:endYear', null);\r\n        return;\r\n      }\r\n      this.$emit('update:endYear', value.getFullYear());\r\n      // if (this.$data.beginYearInternal === null\r\n      //   || this.$data.beginYearInternal > value) {\r\n      //   this.$data.beginYearInternal = value;\r\n      //   this.$emit('update:beginYear', value.getFullYear());\r\n      // }\r\n    },\r\n    beginYear(value) {\r\n      if (value !== null) {\r\n        this.beginYearInternal = new Date(value, 1, 1);\r\n      } else {\r\n        this.beginYearInternal = null;\r\n      }\r\n    },\r\n    endYear(value) {\r\n      if (value !== null) {\r\n        this.endYearInternal = new Date(value, 1, 1);\r\n      } else {\r\n        this.endYearInternal = null;\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    mainStyle() {\r\n      if (this.expand) {\r\n        return '';\r\n      }\r\n      return 'width: 55%';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n  width: 120px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YearRangeSelector.vue?vue&type=template&id=7bfa7c13&scoped=true&\"\nimport script from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bfa7c13\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{on:{\"click\":_vm.addRow}},[_vm._v(\"新增\")]),_c('el-button',{attrs:{\"disabled\":_vm.dataEntryLength === 0},on:{\"click\":_vm.exportTableSheet}},[_vm._v(\"表格导出\")]),_c('d2-crud',{ref:\"d2Crud\",attrs:{\"columns\":_vm.columns,\"data\":_vm.displayData,\"add-template\":_vm.addTemplate,\"rowHandle\":_vm.rowHandle,\"edit-template\":_vm.editTemplate},on:{\"row-add\":_vm.handleRowAdd,\"dialog-cancel\":_vm.handleDialogCancel,\"row-edit\":_vm.handleRowEdit,\"row-remove\":_vm.handleRowRemove}}),_c('div',{staticStyle:{\"color\":\"darkgray\",\"font-size\":\"12px\"}},[_vm._v(\" 共 \"+_vm._s(_vm.dataEntryLength)+\" 条 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-button @click=\"addRow\">新增</el-button>\r\n    <el-button @click=\"exportTableSheet\" :disabled=\"dataEntryLength === 0\">表格导出</el-button>\r\n    <d2-crud\r\n      ref=\"d2Crud\"\r\n      :columns=\"columns\"\r\n      :data=\"displayData\"\r\n      :add-template=\"addTemplate\"\r\n      @row-add=\"handleRowAdd\"\r\n      @dialog-cancel=\"handleDialogCancel\"\r\n\r\n      :rowHandle=\"rowHandle\"\r\n      :edit-template=\"editTemplate\"\r\n      @row-edit=\"handleRowEdit\"\r\n\r\n      @row-remove=\"handleRowRemove\"\r\n    ></d2-crud>\r\n    <div style=\"color: darkgray; font-size: 12px\">\r\n      共 {{ dataEntryLength }} 条\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as json2csv from 'json2csv';\r\nimport { saveAs } from 'file-saver';\r\n\r\nexport default {\r\n  name: 'DataCRUDTable',\r\n  props: ['displayData', 'category'],\r\n  computed: {\r\n    dataEntryLength() {\r\n      if (this.displayData === undefined) {\r\n        return 0;\r\n      }\r\n      return this.displayData.length;\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      columns: [{\r\n        title: '键',\r\n        key: 'key',\r\n      },\r\n      {\r\n        title: '值',\r\n        key: 'value',\r\n      }],\r\n      addTemplate: {\r\n        key: {\r\n          title: '键',\r\n        },\r\n        value: {\r\n          title: '值',\r\n        },\r\n      },\r\n\r\n      editTemplate: {\r\n        key: {\r\n          title: '键',\r\n        },\r\n        value: {\r\n          title: '值',\r\n        },\r\n      },\r\n\r\n      rowHandle: {\r\n        edit: {\r\n          text: '编辑',\r\n          size: 'small',\r\n        },\r\n        remove: {\r\n          size: 'small',\r\n          fixed: 'right',\r\n          confirm: true,\r\n        },\r\n      },\r\n    };\r\n  },\r\n  methods:\r\n      {\r\n        addRow() {\r\n          this.$refs.d2Crud.showDialog({\r\n            mode: 'add',\r\n          });\r\n        },\r\n        exportTableSheet() {\r\n          const fields = [];\r\n          this.$data.columns.forEach((item) => {\r\n            fields.push(item.key);\r\n          });\r\n          console.log(fields);\r\n          const data = json2csv.parse(this.displayData, {\r\n            fields,\r\n          });\r\n          const blob = new Blob([data], { type: 'text/csv' });\r\n          saveAs(blob, 'database.csv');\r\n        },\r\n        handleRowAdd(row, done) {\r\n          this.$axios.post('/db/create', {\r\n            category: this.category,\r\n            newData: {\r\n              key: row.key,\r\n              value: row.value,\r\n            },\r\n          }).then((response) => {\r\n            console.log(response);\r\n            this.$messenger.success('添加成功。');\r\n            this.displayData.push(row);\r\n            done();\r\n          });\r\n        },\r\n        handleDialogCancel(done) {\r\n          done();\r\n        },\r\n        handleRowEdit({ index, row }, done) {\r\n          this.$axios.post('/db/update', {\r\n            category: this.category,\r\n            originData: this.displayData[index],\r\n            modifiedData: row,\r\n          }).then((response) => {\r\n            console.log(response);\r\n            this.$messenger.success('编辑成功。');\r\n            this.displayData[index] = row;\r\n            done();\r\n          });\r\n        },\r\n        // eslint-disable-next-line no-unused-vars\r\n        handleRowRemove({ index, row }, done) {\r\n          this.$axios.post('/db/delete', {\r\n            category: this.category,\r\n            originData: this.displayData[index],\r\n          }).then((response) => {\r\n            console.log(response);\r\n            this.$messenger.success('删除成功。');\r\n            this.displayData.remove(index);\r\n            done();\r\n          });\r\n        },\r\n      },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCRUDTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCRUDTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataCRUDTable.vue?vue&type=template&id=1b8c2a70&scoped=true&\"\nimport script from \"./DataCRUDTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DataCRUDTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1b8c2a70\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{attrs:{\"type\":\"flex\",\"justify\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"数据节点：\"}},[_c('el-cascader',{ref:\"cascader\",staticStyle:{\"width\":\"55%\"},attrs:{\"id\":\"cascader\",\"options\":_vm.metaDataTree,\"change-on-select\":\"\"},model:{value:(_vm.postParams.category),callback:function ($$v) {_vm.$set(_vm.postParams, \"category\", $$v)},expression:\"postParams.category\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地区选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.region),callback:function ($$v) {_vm.$set(_vm.postParams, \"region\", $$v)},expression:\"postParams.region\"}},_vm._l((_vm.knownRegions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"粒度选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.grain),callback:function ($$v) {_vm.$set(_vm.postParams, \"grain\", $$v)},expression:\"postParams.grain\"}},_vm._l((_vm.knownGrains),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"年份选择：\"}},[_c('year-range-selector',{attrs:{\"begin-year\":_vm.postParams.beginYear,\"end-year\":_vm.postParams.endYear},on:{\"update:beginYear\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:begin-year\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:endYear\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)},\"update:end-year\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)}}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":!_vm.canMakeQuery,\"type\":\"primary\"},on:{\"click\":_vm.performQuery}},[_vm._v(\"查找\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-form type=\"flex\" justify=\"right\">\r\n      <el-form-item label=\"数据节点：\">\r\n        <el-cascader id=\"cascader\" :options=\"metaDataTree\" change-on-select\r\n                     ref=\"cascader\" v-model=\"postParams.category\"\r\n                    style=\"width: 55%\"></el-cascader>\r\n      </el-form-item>\r\n      <el-form-item label=\"地区选择：\">\r\n        <el-select placeholder=\"请选择\" v-model=\"postParams.region\">\r\n          <el-option\r\n            v-for=\"item in knownRegions\"\r\n            :key=\"item\"\r\n            :label=\"item\"\r\n            :value=\"item\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"粒度选择：\">\r\n        <el-select placeholder=\"请选择\" v-model=\"postParams.grain\">\r\n          <el-option\r\n            v-for=\"item in knownGrains\"\r\n            :key=\"item\"\r\n            :label=\"item\"\r\n            :value=\"item\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"年份选择：\">\r\n        <year-range-selector :begin-year.sync=\"postParams.beginYear\"\r\n                             :end-year.sync=\"postParams.endYear\">\r\n        </year-range-selector>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button @click=\"performQuery\"\r\n                   :disabled=\"!canMakeQuery\"\r\n                    type=\"primary\">查找</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport YearRangeSelector from '@/components/YearRangeSelector.vue';\r\n\r\nexport default {\r\n  name: 'MetaDataTree',\r\n  props: ['category', 'dataResult'],\r\n  components: {\r\n    YearRangeSelector,\r\n  },\r\n  data() {\r\n    return {\r\n      metaDataTree: [],\r\n      knownRegions: [],\r\n      knownGrains: [],\r\n      dataResultInternal: this.dataResult,\r\n      postParams: {\r\n        category: [],\r\n        region: '',\r\n        grain: '',\r\n        beginYear: null,\r\n        endYear: null,\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    canMakeQuery() {\r\n      const params = this.$data.postParams;\r\n      if (params.region.length === 0) {\r\n        return false;\r\n      }\r\n      if (params.grain.length === 0) {\r\n        return false;\r\n      }\r\n      if (params.beginYear === null || params.endYear === null) {\r\n        return false;\r\n      }\r\n      if (params.category === []) {\r\n        return false;\r\n      }\r\n      return true;\r\n    },\r\n  },\r\n  watch: {\r\n    dataResultInternal(value) {\r\n      this.$emit('update:dataResult', value);\r\n    },\r\n    'postParams.category': function (value) {\r\n      this.$emit('update:category', value);\r\n    },\r\n  },\r\n  methods: {\r\n    loadMetaData() {\r\n      this.$axios.get('/db/metadata').then((response) => {\r\n        this.$data.metaDataTree = response.data.data;\r\n      });\r\n    },\r\n    loadRegions() {\r\n      this.$axios.get('/region/query').then((response) => {\r\n        this.$data.knownRegions = response.data.data;\r\n      });\r\n    },\r\n    loadGrains() {\r\n      this.$axios.get('/grain/query').then((response) => {\r\n        this.$data.knownGrains = response.data.data;\r\n      });\r\n    },\r\n    performQuery() {\r\n      this.$axios.post('/db/query', this.$data.postParams).then((response) => {\r\n        this.$data.dataResultInternal = response.data.data;\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.loadMetaData();\r\n    this.loadRegions();\r\n    this.loadGrains();\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-select, .el-input, .el-cascader .year-range-selector {\r\n  width: 55%\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetaDataTree.vue?vue&type=template&id=347b9f72&scoped=true&\"\nimport script from \"./MetaDataTree.vue?vue&type=script&lang=js&\"\nexport * from \"./MetaDataTree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MetaDataTree.vue?vue&type=style&index=0&id=347b9f72&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"347b9f72\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}