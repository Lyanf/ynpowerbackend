(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e1f2ef06"],{"21c9":function(a,e,t){"use strict";var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-row",{style:a.mainStyle,attrs:{type:"flex",justify:"left"}},[t("el-col",[t("el-date-picker",{attrs:{type:"year",placeholder:"起始年份"},on:{change:a.beginChange},model:{value:a.beginYearInternal,callback:function(e){a.beginYearInternal=e},expression:"beginYearInternal"}})],1),t("el-col",{staticStyle:{margin:"auto","text-align":"center",color:"lightgray","font-size":"12px"}},[a._v(" 至 ")]),t("el-col",[t("el-date-picker",{attrs:{type:"year",placeholder:"终止年份"},on:{change:a.endChange},model:{value:a.endYearInternal,callback:function(e){a.endYearInternal=e},expression:"endYearInternal"}})],1)],1)},r=[],l={name:"YearRangeSelector",props:["beginYear","endYear","expand"],data:function(){return{beginYearInternal:this.beginYear,endYearInternal:this.endYear}},methods:{beginChange:function(a){null===a?this.$emit("update:beginYear",null):this.$emit("update:beginYear",a.getFullYear())},endChange:function(a){null===a?this.$emit("update:endYear",null):this.$emit("update:endYear",a.getFullYear())}},watch:{beginYearInternal:function(a){null!==a?this.$emit("update:beginYear",a.getFullYear()):this.$emit("update:beginYear",null)},endYearInternal:function(a){null!==a?this.$emit("update:endYear",a.getFullYear()):this.$emit("update:endYear",null)},beginYear:function(a){this.beginYearInternal=null!==a?new Date(a,1,1):null},endYear:function(a){this.endYearInternal=null!==a?new Date(a,1,1):null}},computed:{mainStyle:function(){return this.expand?"":"width: 55%"}}},s=l,o=(t("6e83"),t("2877")),i=Object(o["a"])(s,n,r,!1,null,"7bfa7c13",null);e["a"]=i.exports},"2dfa":function(a,e,t){"use strict";t.r(e);var n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("el-row",[t("el-col",{staticStyle:{height:"100%"},attrs:{offset:1,span:12}},[t("el-row",[t("el-transfer",{staticStyle:{height:"100%"},attrs:{filterable:"","filter-placeholder":"输入以查找",data:a.knownFactors,titles:["待选择影响因素","已选择影响因素"],"button-texts":["移除","添加"]},model:{value:a.postParams.factors,callback:function(e){a.$set(a.postParams,"factors",e)},expression:"postParams.factors"}})],1),t("el-row",{staticStyle:{"margin-top":"5em"}},[a.miningResults.length>0?t("span",[a._v("挖掘结果")]):a._e()]),t("el-row",{staticStyle:{"margin-top":"2em"}},a._l(a.miningResults,(function(e){return t("el-tag",{key:e,staticStyle:{margin:"5px"}},[a._v(" "+a._s(e)+" ")])})),1)],1),t("el-col",{staticStyle:{"margin-right":"20px"},attrs:{span:9,offset:1}},[t("el-form",{attrs:{"label-position":"right","label-width":"auto"}},[t("el-form-item",{attrs:{label:"数据年份："}},[t("year-range-selector",{attrs:{"begin-year":a.postParams.StartYear,"end-year":a.postParams.EndYear},on:{"update:beginYear":function(e){return a.$set(a.postParams,"StartYear",e)},"update:begin-year":function(e){return a.$set(a.postParams,"StartYear",e)},"update:endYear":function(e){return a.$set(a.postParams,"EndYear",e)},"update:end-year":function(e){return a.$set(a.postParams,"EndYear",e)}}})],1),t("el-form-item",{attrs:{label:"挖掘方法："}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:a.postParams.method,callback:function(e){a.$set(a.postParams,"method",e)},expression:"postParams.method"}},a._l(a.allMethods,(function(a){return t("el-option",{key:a.value,attrs:{label:a.label,value:a.value}})})),1)],1),a._l(a.requiredParams,(function(e){return t("div",{key:e.key},["econamelist"!==e.key?t("el-form-item",{attrs:{label:e.label+"："}},["int"===e.kind?t("el-input",{attrs:{step:1,type:"number",clearable:"",placeholder:"请输入整数数字"},model:{value:a.postParams[e.key],callback:function(t){a.$set(a.postParams,e.key,t)},expression:"postParams[param.key]"}}):"float"===e.kind?t("el-input",{attrs:{step:.01,type:"number",clearable:"",placeholder:"请输入数字"},model:{value:a.postParams[e.key],callback:function(t){a.$set(a.postParams,e.key,t)},expression:"postParams[param.key]"}}):e.kind.startsWith("option")?t("el-select",{attrs:{placeholder:"请选择一项"},model:{value:a.postParams[e.key],callback:function(t){a.$set(a.postParams,e.key,t)},expression:"postParams[param.key]"}},a._l(e.value,(function(a){return t("el-option",{key:a,attrs:{label:a,value:a}})})),1):e.kind.startsWith("multioption")?t("el-select",{attrs:{multiple:"",placeholder:"请选择数项"},model:{value:a.postParams[e.key],callback:function(t){a.$set(a.postParams,e.key,t)},expression:"postParams[param.key]"}},a._l(e.value,(function(a){return t("el-option",{key:a,attrs:{label:a,value:a}})})),1):t("el-input",{attrs:{placeholder:"请输入"},model:{value:a.postParams[e.key],callback:function(t){a.$set(a.postParams,e.key,t)},expression:"postParams[param.key]"}})],1):a._e()],1)})),t("el-form-item",{attrs:{label:"方案标签："}},[t("el-input",{attrs:{clearable:"",placeholder:"可留空"},model:{value:a.postParams.tag,callback:function(e){a.$set(a.postParams,"tag",e)},expression:"postParams.tag"}})],1),t("el-form-item",{attrs:{label:"加载方案："}},[t("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:"选择标签",size:"small"},model:{value:a.currentTag,callback:function(e){a.currentTag=e},expression:"currentTag"}},a._l(a.knownTags,(function(a){return t("el-option",{key:a.id,attrs:{label:a.id,value:a.id}})})),1),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",disabled:null===a.currentTag},on:{click:a.loadParameters}},[a._v("加载")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",disabled:!a.isFormComplete},on:{click:a.commitMining}},[a._v(" 确定 ")]),t("el-button",{on:{click:a.goToResultPage}},[a._v("挖掘结果展示")])],1)],2)],1),t("el-col",{attrs:{offset:1,span:22}},[t("el-form",["K均值算法"===a.postParams.method?t("div",[t("el-form-item",[t("el-button",{attrs:{disabled:0===a.kMeansData.length},on:{click:a.exportKMeansData}},[a._v("导出表格")])],1),t("el-form-item",{attrs:{label:"挖掘结果表："}},[t("el-table",{attrs:{data:a.kMeansData}},[t("el-table-column",{attrs:{prop:"index",label:"类别序号"}}),t("el-table-column",{attrs:{prop:"members",label:"成员"}})],1)],1)],1):a._e(),"主成分分析算法"===a.postParams.method?t("div",[t("el-form-item",[t("el-button",{attrs:{disabled:0===a.pcaData.length},on:{click:a.exportPCAData}},[a._v("导出表格")])],1),t("el-form-item",{attrs:{label:"挖掘结果表："}},[t("el-table",{attrs:{data:a.pcaData}},[t("el-table-column",{attrs:{prop:"index",label:"主成分编号"}}),t("el-table-column",{attrs:{prop:"percentage",label:"所占比例"}}),t("el-table-column",{attrs:{prop:"name",label:"影响因素名称"}}),t("el-table-column",{attrs:{prop:"factor",label:"影响因素对应系数"}})],1)],1)],1):a._e(),"关联规则分析算法"===a.postParams.method?t("div",[t("el-form-item",[t("el-button",{attrs:{disabled:0===a.aprioriData.length},on:{click:a.exportAprioriData}},[a._v("导出表格")])],1),t("el-form-item",{attrs:{label:"挖掘结果表："}},[t("el-table",{attrs:{data:a.aprioriData}},[t("el-table-column",{attrs:{prop:"name",label:"影响因素名称"}}),t("el-table-column",{attrs:{prop:"score",label:"影响因素强弱得分"}}),t("el-table-column",{attrs:{prop:"confidence",label:"置信度"}})],1)],1)],1):a._e()])],1)],1)},r=[],l=(t("159b"),t("a15b"),t("21c9")),s={name:"DataMining",components:{YearRangeSelector:l["a"]},mounted:function(){this.loadFactors(),this.loadTags()},computed:{isFormComplete:function(){var a=this.$data.postParams;return null!==a.StartYear&&null!==a.EndYear&&(0!==a.factors.length&&0!==a.method.length)}},methods:{loadTags:function(){var a=this;this.$axios.get("/tags/query",{params:{tagType:"MINING"}}).then((function(e){a.$data.knownTags=e.data.data}))},loadParameters:function(){var a=this;this.$axios.get("/params/mining",{params:{tag:this.$data.currentTag}}).then((function(e){a.$data.postParams=e.data.data}))},loadFactors:function(){var a=this;this.$axios.get("/factor/query").then((function(e){e.data.data.forEach((function(e){a.$data.knownFactors.push({label:e,key:e})}))}))},commitMining:function(){var a=this,e=this.$data.postParams;e.econamelist=this.$data.postParams.factors,this.$axios.post("/mining/request",e).then((function(t){if(a.$messenger.success("数据挖掘成功。"),"K均值算法"===e.method){a.$data.kMeansData=[];var n=1;t.data.data.Clusters.forEach((function(e){a.$data.kMeansData.push({index:n,members:e.join("、")}),n+=1}))}else if("主成分分析算法"===e.method){a.$data.pcaData=[];for(var r=0;r<t.data.data.N_components.length;r+=1)for(var l=0;l<t.data.data.FactorName.length;l+=1)a.$data.pcaData.push({index:r+1,percentage:t.data.data.ComponetRatio[r],name:t.data.data.FactorName[l],factor:t.data.data.Vectors[r][l]})}else if("关联规则分析算法"===e.method){a.$data.aprioriData=[];for(var s=0;s<t.data.data.FactorsName.length;s+=1)a.$data.aprioriData.push({name:t.data.data.FactorsName[s],score:t.data.data.Score[s],confidence:t.data.data.Confidence[s]})}}))},goToResultPage:function(){window.location="/#/miningResult"},exportKMeansData:function(){},exportPCAData:function(){},exportAprioriData:function(){}},data:function(){return{allMethods:[{label:"K均值算法",value:"K均值算法"},{label:"主成分分析算法",value:"主成分分析算法"},{label:"关联规则分析算法",value:"关联规则分析算法"}],knownFactors:[],knownTags:[],requiredParams:[],currentTag:null,suggestCategoryCount:null,miningResults:[],postParams:{method:"",factors:[],StartYear:null,EndYear:null,tag:"",tagType:"MINING"},kMeansData:[],pcaData:[],aprioriData:[]}},watch:{"postParams.method":function(a){var e=this;this.$data.requiredParams=[],this.$axios.get("/get/args",{params:{method:a}}).then((function(a){a.data.data.para.forEach((function(a){"StartYear"===a.key||"EndYear"===a.key||"PreStartYear"===a.key||"PreEndYear"===a.key||(e.$data.requiredParams.push(a),void 0!==a.default&&e.$set(e.postParams,a.key,a.default))}))}))}}},o=s,i=(t("c6d0"),t("2877")),c=Object(i["a"])(o,n,r,!1,null,"08a8e7a8",null);e["default"]=c.exports},5385:function(a,e,t){},"6e83":function(a,e,t){"use strict";t("e4af")},c6d0:function(a,e,t){"use strict";t("5385")},e4af:function(a,e,t){}}]);
//# sourceMappingURL=chunk-e1f2ef06.1b590387.js.map