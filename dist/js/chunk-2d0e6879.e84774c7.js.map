{"version":3,"sources":["webpack:///./src/views/PredictResultDisplay.vue?a976","webpack:///src/views/PredictResultDisplay.vue","webpack:///./src/views/PredictResultDisplay.vue?bbbb","webpack:///./src/views/PredictResultDisplay.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","model","value","postParams","callback","$$v","$set","expression","_l","item","key","tag","staticStyle","_v","_s","typeName","tagType","label","canCommitQuery","on","performCompare","undefined","currentChart","exportImage","currentDisplayMethod","_e","staticRenderFns","base64ToBlob","code","uInt8Array","i","raw","charCodeAt","Blob","name","data","tags","trait","displayData","displayMethods","knownTags","knownTraits","MINING","STATIC_REGIONAL","DYNAMIC_INDUSTRIAL","MIX","LONGTERM","BIGUSER","SOKU","CLAMP","INTERP","YEARCONT","mounted","loadTags","computed","params","length","methods","$axios","get","then","refreshChart","echarts","window","onresize","resize","yData","forEach","series","push","elem","type","tooltip","trigger","axisPointer","xAxis","xName","xData","axisTick","alignWithLabel","axisLabel","show","textStyle","color","fontSize","axisLine","lineStyle","boundaryGap","$data","onZero","yAxis","yName","legend","orient","x","y","setOption","initializeOption","style","width","post","watch","component"],"mappings":"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","file":"js/chunk-2d0e6879.e84774c7.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-row',{attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('el-col',{attrs:{\"span\":5,\"offset\":1}},[_c('el-form',{attrs:{\"label-position\":\"right\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"对比方案标签：\"}},[_c('el-select',{attrs:{\"multiple\":\"\"},model:{value:(_vm.postParams.tags),callback:function ($$v) {_vm.$set(_vm.postParams, \"tags\", $$v)},expression:\"postParams.tags\"}},_vm._l((_vm.knownTags),function(item){return _c('el-option',{key:item.tag,attrs:{\"value\":item.tag}},[_c('span',{staticStyle:{\"float\":\"left\"}},[_vm._v(_vm._s(item.tag))]),_c('span',{staticStyle:{\"float\":\"right\",\"color\":\"#8492a6\"}},[_vm._v(_vm._s(_vm.typeName[item.tagType]))])])}),1)],1),_c('el-form-item',{attrs:{\"label\":\"对比特征：\"}},[_c('el-select',{model:{value:(_vm.postParams.trait),callback:function ($$v) {_vm.$set(_vm.postParams, \"trait\", $$v)},expression:\"postParams.trait\"}},_vm._l((_vm.knownTraits),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":!_vm.canCommitQuery},on:{\"click\":_vm.performCompare}},[_vm._v(\"对比\")])],1)],1)],1),_c('el-col',{attrs:{\"span\":17,\"offset\":1}},[_c('el-row',[_c('div',{staticStyle:{\"height\":\"500px\"},attrs:{\"id\":\"compareChart\"}})]),(_vm.currentChart !== undefined)?_c('el-row',[_c('el-form',[_c('el-form-item',[_c('el-button',{on:{\"click\":_vm.exportImage}},[_vm._v(\"导出图像\")])],1),_c('el-form-item',{attrs:{\"label\":\"显示方式：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.currentDisplayMethod),callback:function ($$v) {_vm.currentDisplayMethod=$$v},expression:\"currentDisplayMethod\"}},_vm._l((_vm.displayMethods),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1)],1):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-row type=\"flex\" justify=\"center\">\n      <el-col :span=\"5\" :offset=\"1\">\n        <el-form label-position=\"right\" label-width=\"auto\">\n          <el-form-item label=\"对比方案标签：\">\n            <el-select v-model=\"postParams.tags\" multiple>\n              <el-option v-for=\"item in knownTags\"\n                         :key=\"item.tag\"\n                         :value=\"item.tag\">\n                <span style=\"float: left\">{{ item.tag }}</span>\n                <span style=\"float: right; color: #8492a6;\">{{ typeName[item.tagType] }}</span>\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"对比特征：\">\n            <el-select v-model=\"postParams.trait\">\n              <el-option v-for=\"item in knownTraits\"\n                         :key=\"item.value\"\n                         :label=\"item.label\"\n                         :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"performCompare\"\n                       type=\"primary\"\n                       :disabled=\"!canCommitQuery\">对比</el-button>\n          </el-form-item>\n        </el-form>\n      </el-col>\n      <el-col :span=\"17\" :offset=\"1\">\n        <el-row>\n          <div id=\"compareChart\" style=\"height: 500px\"></div>\n        </el-row>\n        <el-row v-if=\"currentChart !== undefined\">\n          <el-form>\n            <el-form-item>\n              <el-button v-on:click=\"exportImage\">导出图像</el-button>\n            </el-form-item>\n            <el-form-item label=\"显示方式：\">\n              <el-select placeholder=\"请选择\" v-model=\"currentDisplayMethod\">\n                <el-option\n                  v-for=\"item in displayMethods\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\">\n                </el-option>\n              </el-select>\n            </el-form-item>\n          </el-form>\n        </el-row>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts';\nimport { saveAs } from 'file-saver';\n\nfunction base64ToBlob(code) {\n  const parts = code.split(';base64,');\n  const contentType = parts[0].split(':')[1];\n  const raw = window.atob(parts[1]);\n  const rawLength = raw.length;\n\n  const uInt8Array = new Uint8Array(rawLength);\n\n  // eslint-disable-next-line no-plusplus\n  for (let i = 0; i < rawLength; ++i) {\n    uInt8Array[i] = raw.charCodeAt(i);\n  }\n  return new Blob([uInt8Array], { type: contentType });\n}\n\nexport default {\n  name: 'PredictResultDisplay',\n  data() {\n    return {\n      postParams: {\n        tags: [],\n        trait: null,\n      },\n      currentChart: undefined,\n      displayData: [],\n      displayMethods: [\n        {\n          label: '折线图',\n          value: 'line',\n        },\n        {\n          label: '柱状图',\n          value: 'bar',\n        },\n        {\n          label: '散点图',\n          value: 'scatter',\n        },\n      ],\n      knownTags: [],\n      knownTraits: [\n        {\n          label: 'MAPE 值',\n          value: 'MAPE',\n        },\n        {\n          label: 'RMSE 值',\n          value: 'RMSE',\n        },\n        {\n          label: '预测功率值（MW）',\n          value: 'predictMVW',\n        },\n      ],\n      typeName: {\n        MINING: '数据挖掘方案',\n        STATIC_REGIONAL: '地区单预测方案',\n        DYNAMIC_INDUSTRIAL: '行业单预测方案',\n        MIX: '组合预测方案',\n        LONGTERM: '远期规划预测方案',\n        BIGUSER: '大用户预测方案',\n        SOKU: '负荷特性预测方案',\n        CLAMP: '负荷特性预测方案',\n        INTERP: '负荷特性预测方案',\n        YEARCONT: '负荷特性预测方案',\n      },\n      currentDisplayMethod: 'line',\n    };\n  },\n  mounted() {\n    this.loadTags();\n  },\n  computed: {\n    canCommitQuery() {\n      const params = this.$data.postParams;\n      return !(params.tags.length < 2 || params.trait === null);\n    },\n  },\n  methods: {\n    exportImage() {\n      if (!this.currentChart) {\n        return;\n      }\n      const content = this.currentChart.getDataURL();\n      const blob = base64ToBlob(content);\n      saveAs(blob, '预测图像.png');\n    },\n    loadTags() {\n      this.$axios.get('/predict/results/query').then((response) => {\n        this.$data.knownTags = response.data.data;\n      });\n    },\n    refreshChart() {\n      const data = this.$data.displayData;\n      if (this.currentChart === undefined) {\n        this.currentChart = echarts.init(document.getElementById('compareChart'));\n        window.onresize = this.currentChart.resize;\n      }\n      const series = [];\n      data.yData.forEach((elem) => {\n        series.push({\n          data: elem.data,\n          name: elem.tag,\n          type: this.$data.currentDisplayMethod,\n        });\n      });\n      const initializeOption = {\n        // color: ['#DBDA39'],\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'shadow',\n          },\n        },\n        xAxis: {\n          type: 'category',\n          name: data.xName,\n          data: data.xData,\n          axisTick: {\n            alignWithLabel: true,\n          },\n          axisLabel: {\n            show: true,\n            textStyle: {\n              color: '#ffffff',\n              fontSize: 14,\n            },\n          },\n          axisLine: {\n            lineStyle: {\n              color: '#ffffff',\n            },\n          },\n          boundaryGap: this.$data.currentDisplayMethod === 'bar',\n          onZero: true,\n        },\n        yAxis: {\n          type: 'value',\n          name: data.yName,\n          axisLabel: {\n            show: true,\n            textStyle: {\n              color: '#ffffff',\n              fontSize: 14,\n            },\n          },\n          axisLine: {\n            lineStyle: {\n              color: '#ffffff',\n            },\n          },\n        },\n        series,\n        legend: {\n          // orient 设置布局方式，默认水平布局，可选值：'horizontal'（水平） ¦ 'vertical'（垂直）\n          orient: 'horizontal',\n          // x 设置水平安放位置，默认全图居中，可选值：'center' ¦ 'left' ¦ 'right' ¦ {number}（x坐标，单位px）\n          x: 'center',\n          // y 设置垂直安放位置，默认全图顶端，可选值：'top' ¦ 'bottom' ¦ 'center' ¦ {number}（y坐标，单位px）\n          y: 'top',\n          textStyle: {\n            color: '#ffffff',\n            fontSize: 16,\n          },\n        },\n      };\n      this.currentChart.setOption(initializeOption, true);\n      this.currentChart.style.width = `${document.body.clientWidth * 0.6}px`;\n    },\n    performCompare() {\n      this.$axios.post('/predict/results/compare', this.$data.postParams).then((response) => {\n        this.$data.displayData = response.data.data;\n        this.refreshChart();\n      });\n    },\n  },\n  watch: {\n    currentDisplayMethod() {\n      this.refreshChart();\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PredictResultDisplay.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PredictResultDisplay.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PredictResultDisplay.vue?vue&type=template&id=be9f7fee&scoped=true&\"\nimport script from \"./PredictResultDisplay.vue?vue&type=script&lang=js&\"\nexport * from \"./PredictResultDisplay.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"be9f7fee\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}