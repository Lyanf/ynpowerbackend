{"version":3,"sources":["webpack:///./src/components/YearRangeSelector.vue?f616","webpack:///src/components/YearRangeSelector.vue","webpack:///./src/components/YearRangeSelector.vue?85dd","webpack:///./src/components/YearRangeSelector.vue","webpack:///./src/components/DataCRUDTable.vue?1f79","webpack:///src/components/DataCRUDTable.vue","webpack:///./src/components/DataCRUDTable.vue?f77c","webpack:///./src/components/DataCRUDTable.vue","webpack:///./src/components/YearRangeSelector.vue?9635","webpack:///./src/components/MetaDataTree.vue?c601","webpack:///src/components/MetaDataTree.vue","webpack:///./src/components/MetaDataTree.vue?69b2","webpack:///./src/components/MetaDataTree.vue","webpack:///./src/views/ElectricityPowerData.vue?1547","webpack:///src/views/ElectricityPowerData.vue","webpack:///./src/views/ElectricityPowerData.vue?2c91","webpack:///./src/views/ElectricityPowerData.vue","webpack:///./src/components/MetaDataTree.vue?47b4"],"names":["render","_vm","this","_h","$createElement","_c","_self","style","attrs","on","beginChange","model","value","callback","$$v","beginYearInternal","expression","staticStyle","_v","endChange","endYearInternal","staticRenderFns","name","props","data","beginYear","endYear","methods","$emit","getFullYear","watch","Date","computed","mainStyle","expand","component","addRow","dataEntryLength","exportTableSheet","ref","columns","displayData","addTemplate","rowHandle","editTemplate","handleRowAdd","handleDialogCancel","handleRowEdit","handleRowRemove","_s","undefined","length","title","key","edit","text","size","remove","fixed","confirm","metaDataTree","postParams","$set","_l","item","$event","canMakeQuery","performQuery","components","YearRangeSelector","knownRegions","knownGrains","dataResultInternal","dataResult","category","region","grain","params","handler","deep","loadMetaData","$axios","get","then","loadRegions","loadGrains","post","$data","mounted","slot","tableData","DataCRUDTable","MetaDataTree"],"mappings":"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","file":"js/chunk-46cea004.9a9c603e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',{style:(_vm.mainStyle),attrs:{\"type\":\"flex\",\"justify\":\"left\"}},[_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"起始年份\"},on:{\"change\":_vm.beginChange},model:{value:(_vm.beginYearInternal),callback:function ($$v) {_vm.beginYearInternal=$$v},expression:\"beginYearInternal\"}})],1),_c('el-col',{staticStyle:{\"margin\":\"auto\",\"text-align\":\"center\",\"color\":\"lightgray\",\"font-size\":\"12px\"}},[_vm._v(\" 至 \")]),_c('el-col',[_c('el-date-picker',{attrs:{\"type\":\"year\",\"placeholder\":\"终止年份\"},on:{\"change\":_vm.endChange},model:{value:(_vm.endYearInternal),callback:function ($$v) {_vm.endYearInternal=$$v},expression:\"endYearInternal\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-row type=\"flex\" justify=\"left\" :style=\"mainStyle\">\n<!--    <div>-->\n<!--      {{ this.$data }}-->\n<!--    </div>-->\n<!--    <div>-->\n<!--      {{ this.$props }}-->\n<!--    </div>-->\n    <el-col>\n      <el-date-picker\n        v-model=\"beginYearInternal\"\n        type=\"year\"\n        placeholder=\"起始年份\"\n        @change=\"beginChange\"/>\n    </el-col>\n    <el-col style=\"margin: auto; text-align: center; color: lightgray; font-size: 12px\">\n      至\n    </el-col>\n    <el-col>\n      <el-date-picker\n        v-model=\"endYearInternal\"\n        type=\"year\"\n        placeholder=\"终止年份\"\n        @change=\"endChange\"/>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\nexport default {\n  name: 'YearRangeSelector',\n  props: ['beginYear', 'endYear', 'expand'],\n  data() {\n    return {\n      beginYearInternal: this.beginYear,\n      endYearInternal: this.endYear,\n    };\n  },\n  methods: {\n    beginChange(value) {\n      if (value === null) {\n        this.$emit('update:beginYear', null);\n      } else {\n        this.$emit('update:beginYear', value.getFullYear());\n      }\n    },\n    endChange(value) {\n      if (value === null) {\n        this.$emit('update:endYear', null);\n      } else {\n        this.$emit('update:endYear', value.getFullYear());\n      }\n    },\n  },\n  watch: {\n    beginYearInternal(value) {\n      if (value === null) {\n        this.$emit('update:beginYear', null);\n        return;\n      }\n      this.$emit('update:beginYear', value.getFullYear());\n      // if (this.$data.endYearInternal === null\n      //   || this.$data.endYearInternal < value) {\n      //   this.$data.endYearInternal = value;\n      //   this.$emit('update:endYear', value.getFullYear());\n      // }\n    },\n    endYearInternal(value) {\n      if (value === null) {\n        this.$emit('update:endYear', null);\n        return;\n      }\n      this.$emit('update:endYear', value.getFullYear());\n      // if (this.$data.beginYearInternal === null\n      //   || this.$data.beginYearInternal > value) {\n      //   this.$data.beginYearInternal = value;\n      //   this.$emit('update:beginYear', value.getFullYear());\n      // }\n    },\n    beginYear(value) {\n      if (value !== null) {\n        this.beginYearInternal = new Date(value, 1, 1);\n      } else {\n        this.beginYearInternal = null;\n      }\n    },\n    endYear(value) {\n      if (value !== null) {\n        this.endYearInternal = new Date(value, 1, 1);\n      } else {\n        this.endYearInternal = null;\n      }\n    },\n  },\n  computed: {\n    mainStyle() {\n      if (this.expand) {\n        return '';\n      }\n      return 'width: 55%';\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\n  width: 120px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./YearRangeSelector.vue?vue&type=template&id=7bfa7c13&scoped=true&\"\nimport script from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nexport * from \"./YearRangeSelector.vue?vue&type=script&lang=js&\"\nimport style0 from \"./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bfa7c13\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-button',{on:{\"click\":_vm.addRow}},[_vm._v(\"新增\")]),_c('el-button',{attrs:{\"disabled\":_vm.dataEntryLength === 0},on:{\"click\":_vm.exportTableSheet}},[_vm._v(\"表格导出\")]),_c('d2-crud',{ref:\"d2Crud\",attrs:{\"columns\":_vm.columns,\"data\":_vm.displayData,\"add-template\":_vm.addTemplate,\"rowHandle\":_vm.rowHandle,\"edit-template\":_vm.editTemplate},on:{\"row-add\":_vm.handleRowAdd,\"dialog-cancel\":_vm.handleDialogCancel,\"row-edit\":_vm.handleRowEdit,\"row-remove\":_vm.handleRowRemove}}),_c('div',{staticStyle:{\"color\":\"darkgray\",\"font-size\":\"12px\"}},[_vm._v(\" 共 \"+_vm._s(_vm.dataEntryLength)+\" 条 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-button @click=\"addRow\">新增</el-button>\n    <el-button @click=\"exportTableSheet\" :disabled=\"dataEntryLength === 0\">表格导出</el-button>\n    <d2-crud\n      ref=\"d2Crud\"\n      :columns=\"columns\"\n      :data=\"displayData\"\n      :add-template=\"addTemplate\"\n      @row-add=\"handleRowAdd\"\n      @dialog-cancel=\"handleDialogCancel\"\n\n      :rowHandle=\"rowHandle\"\n      :edit-template=\"editTemplate\"\n      @row-edit=\"handleRowEdit\"\n\n      @row-remove=\"handleRowRemove\"\n    ></d2-crud>\n    <div style=\"color: darkgray; font-size: 12px\">\n      共 {{ dataEntryLength }} 条\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as json2csv from 'json2csv';\nimport { saveAs } from 'file-saver';\n\nexport default {\n  name: 'DataCRUDTable',\n  props: ['displayData', 'category', 'context'],\n  computed: {\n    dataEntryLength() {\n      if (this.displayData === undefined) {\n        return 0;\n      }\n      return this.displayData.length;\n    },\n  },\n  data() {\n    return {\n      columns: [{\n        title: '键',\n        key: 'key',\n      },\n      {\n        title: '值',\n        key: 'value',\n      }],\n      addTemplate: {\n        key: {\n          title: '键',\n        },\n        value: {\n          title: '值',\n        },\n      },\n\n      editTemplate: {\n        key: {\n          title: '键',\n        },\n        value: {\n          title: '值',\n        },\n      },\n\n      rowHandle: {\n        edit: {\n          text: '编辑',\n          size: 'small',\n        },\n        remove: {\n          size: 'small',\n          fixed: 'right',\n          confirm: true,\n        },\n      },\n    };\n  },\n  methods:\n      {\n        addRow() {\n          this.$refs.d2Crud.showDialog({\n            mode: 'add',\n          });\n        },\n        exportTableSheet() {\n          const fields = [];\n          this.$data.columns.forEach((item) => {\n            fields.push(item.key);\n          });\n          console.log(fields);\n          const data = json2csv.parse(this.displayData, {\n            fields,\n          });\n          const blob = new Blob([data], { type: 'text/csv' });\n          saveAs(blob, 'database.csv');\n        },\n        handleRowAdd(row, done) {\n          this.$axios.post('/db/create', {\n            context: this.context,\n            newData: {\n              key: row.key,\n              value: row.value,\n            },\n          }).then((response) => {\n            console.log(response);\n            this.$messenger.success('添加成功。');\n            this.displayData.push(row);\n            done();\n          });\n        },\n        handleDialogCancel(done) {\n          done();\n        },\n        handleRowEdit({ index, row }, done) {\n          this.$axios.post('/db/update', {\n            category: this.category,\n            originData: this.displayData[index],\n            modifiedData: row,\n          }).then((response) => {\n            console.log(response);\n            this.$messenger.success('编辑成功。');\n            this.displayData[index] = row;\n            done();\n          });\n        },\n        // eslint-disable-next-line no-unused-vars\n        handleRowRemove({ index, row }, done) {\n          this.$axios.post('/db/delete', {\n            category: this.category,\n            originData: this.displayData[index],\n          }).then((response) => {\n            console.log(response);\n            this.$messenger.success('删除成功。');\n            this.displayData.remove(index);\n            done();\n          });\n        },\n      },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCRUDTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCRUDTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataCRUDTable.vue?vue&type=template&id=b2a644fa&scoped=true&\"\nimport script from \"./DataCRUDTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DataCRUDTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b2a644fa\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./YearRangeSelector.vue?vue&type=style&index=0&id=7bfa7c13&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{attrs:{\"type\":\"flex\",\"justify\":\"right\"}},[_c('el-form-item',{attrs:{\"label\":\"数据节点：\"}},[_c('el-cascader',{ref:\"cascader\",staticStyle:{\"width\":\"55%\"},attrs:{\"id\":\"cascader\",\"options\":_vm.metaDataTree,\"change-on-select\":\"\"},model:{value:(_vm.postParams.category),callback:function ($$v) {_vm.$set(_vm.postParams, \"category\", $$v)},expression:\"postParams.category\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地区选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.region),callback:function ($$v) {_vm.$set(_vm.postParams, \"region\", $$v)},expression:\"postParams.region\"}},_vm._l((_vm.knownRegions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"粒度选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.grain),callback:function ($$v) {_vm.$set(_vm.postParams, \"grain\", $$v)},expression:\"postParams.grain\"}},_vm._l((_vm.knownGrains),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"年份选择：\"}},[_c('year-range-selector',{attrs:{\"begin-year\":_vm.postParams.beginYear,\"end-year\":_vm.postParams.endYear},on:{\"update:beginYear\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:begin-year\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:endYear\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)},\"update:end-year\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)}}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":!_vm.canMakeQuery,\"type\":\"primary\"},on:{\"click\":_vm.performQuery}},[_vm._v(\"查找\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-form type=\"flex\" justify=\"right\">\n      <el-form-item label=\"数据节点：\">\n        <el-cascader id=\"cascader\" :options=\"metaDataTree\" change-on-select\n                     ref=\"cascader\" v-model=\"postParams.category\"\n                    style=\"width: 55%\"></el-cascader>\n      </el-form-item>\n      <el-form-item label=\"地区选择：\">\n        <el-select placeholder=\"请选择\" v-model=\"postParams.region\">\n          <el-option\n            v-for=\"item in knownRegions\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"item\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n\n      <el-form-item label=\"粒度选择：\">\n        <el-select placeholder=\"请选择\" v-model=\"postParams.grain\">\n          <el-option\n            v-for=\"item in knownGrains\"\n            :key=\"item\"\n            :label=\"item\"\n            :value=\"item\">\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"年份选择：\">\n        <year-range-selector :begin-year.sync=\"postParams.beginYear\"\n                             :end-year.sync=\"postParams.endYear\">\n        </year-range-selector>\n      </el-form-item>\n      <el-form-item>\n        <el-button @click=\"performQuery\"\n                   :disabled=\"!canMakeQuery\"\n                    type=\"primary\">查找</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport YearRangeSelector from '@/components/YearRangeSelector.vue';\n\nexport default {\n  name: 'MetaDataTree',\n  props: ['category', 'dataResult', 'context'],\n  components: {\n    YearRangeSelector,\n  },\n  data() {\n    return {\n      metaDataTree: [],\n      knownRegions: [],\n      knownGrains: [],\n      dataResultInternal: this.dataResult,\n      postParams: {\n        category: [],\n        region: '',\n        grain: '',\n        beginYear: null,\n        endYear: null,\n      },\n    };\n  },\n  computed: {\n    canMakeQuery() {\n      const params = this.$data.postParams;\n      if (params.region.length === 0) {\n        return false;\n      }\n      if (params.grain.length === 0) {\n        return false;\n      }\n      if (params.beginYear === null || params.endYear === null) {\n        return false;\n      }\n      if (params.category === []) {\n        return false;\n      }\n      return true;\n    },\n  },\n  watch: {\n    dataResultInternal(value) {\n      this.$emit('update:dataResult', value);\n    },\n    'postParams.category': function (value) {\n      this.$emit('update:category', value);\n    },\n    postParams: {\n      handler(value) {\n        this.$emit('update:context', value);\n      },\n      deep: true,\n    },\n  },\n  methods: {\n    loadMetaData() {\n      this.$axios.get('/db/metadata').then((response) => {\n        this.$data.metaDataTree = response.data.data;\n      });\n    },\n    loadRegions() {\n      this.$axios.get('/region/query').then((response) => {\n        this.$data.knownRegions = response.data.data;\n      });\n    },\n    loadGrains() {\n      this.$axios.get('/grain/query').then((response) => {\n        this.$data.knownGrains = response.data.data;\n      });\n    },\n    performQuery() {\n      this.$axios.post('/db/query', this.$data.postParams).then((response) => {\n        this.$data.dataResultInternal = response.data.data;\n      });\n    },\n  },\n  mounted() {\n    this.loadMetaData();\n    this.loadRegions();\n    this.loadGrains();\n  },\n};\n</script>\n\n<style scoped>\n.el-select, .el-input, .el-cascader .year-range-selector {\n  width: 55%\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetaDataTree.vue?vue&type=template&id=9a465c9a&scoped=true&\"\nimport script from \"./MetaDataTree.vue?vue&type=script&lang=js&\"\nexport * from \"./MetaDataTree.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MetaDataTree.vue?vue&type=style&index=0&id=9a465c9a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a465c9a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',[_c('span',{attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('span',[_vm._v(\"电力电量数据\")])]),_c('el-row',{attrs:{\"justify\":\"space-around\"}},[_c('MetaDataTree',{attrs:{\"category\":\"ElecPower\",\"data-result\":_vm.tableData},on:{\"update:dataResult\":function($event){_vm.tableData=$event},\"update:data-result\":function($event){_vm.tableData=$event}}})],1),_c('el-row',[_c('DataCRUDTable',{attrs:{\"category\":\"ElecPower\",\"display-data\":_vm.tableData},on:{\"update:displayData\":function($event){_vm.tableData=$event},\"update:display-data\":function($event){_vm.tableData=$event}}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <el-card>\n      <span slot=\"header\">\n        <span>电力电量数据</span>\n      </span>\n      <el-row justify=\"space-around\">\n        <MetaDataTree category=\"ElecPower\" :data-result.sync=\"tableData\"></MetaDataTree>\n      </el-row>\n      <el-row>\n        <DataCRUDTable category=\"ElecPower\" :display-data.sync=\"tableData\"></DataCRUDTable>\n      </el-row>\n    </el-card>\n  </div>\n</template>\n<script>\nimport MetaDataTree from '@/components/MetaDataTree.vue';\nimport DataCRUDTable from '@/components/DataCRUDTable.vue';\n\nexport default {\n  name: 'ElectricityPowerData',\n  components: {\n    DataCRUDTable,\n    MetaDataTree,\n  },\n  data() {\n    return {\n      tableData: [],\n    };\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ElectricityPowerData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ElectricityPowerData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ElectricityPowerData.vue?vue&type=template&id=c355f3e4&\"\nimport script from \"./ElectricityPowerData.vue?vue&type=script&lang=js&\"\nexport * from \"./ElectricityPowerData.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetaDataTree.vue?vue&type=style&index=0&id=9a465c9a&scoped=true&lang=css&\""],"sourceRoot":""}