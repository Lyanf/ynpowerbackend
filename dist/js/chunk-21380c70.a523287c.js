(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21380c70"],{"63e4":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"方案标签："}},[a("el-select",{model:{value:t.selectedTag,callback:function(e){t.selectedTag=e},expression:"selectedTag"}},t._l(t.knownTags,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id}},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.id))]),a("span",{staticStyle:{float:"right",color:"#8492a6"}},[t._v(t._s(t.typeName[e.tagType]))])])})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:null===t.selectedTag},on:{click:t.preformQuery}},[t._v("查询")])],1)],1),a("el-form",{attrs:{"label-position":"right","label-width":"auto"}},[a("el-col",{attrs:{span:8}},t._l(t.knownKVs,(function(e){return a("el-form-item",{key:e.key,attrs:{label:e.key+"："}},[a("a",[t._v(t._s(e.value))])])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-row",[a("ResultChart",{ref:"resultChart"})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:22,offset:1}},[a("ResultTable",{ref:"resultTable"})],1)],1)],1)},l=[],n=(a("159b"),a("b64b"),a("c3ab")),i=a("f70a"),s={name:"PredictResultQuery",components:{ResultTable:i["a"],ResultChart:n["a"]},data:function(){return{knownTags:[],selectedTag:null,knownKVs:[],typeName:{MINING:"数据挖掘方案",STATIC_REGIONAL:"地区单预测方案",DYNAMIC_INDUSTRIAL:"行业单预测方案",MIX:"组合预测方案",LONGTERM:"远期规划预测方案",BIGUSER:"大用户预测方案",SOKU:"负荷特性预测方案",CLAMP:"负荷特性预测方案",INTERP:"负荷特性预测方案",YEARCONT:"负荷特性预测方案"}}},mounted:function(){this.loadTags()},methods:{loadTags:function(){var t=this;this.$axios.get("/predict/results/query").then((function(e){t.$data.knownTags=e.data.data}))},preformQuery:function(){var t=this;this.$axios.get("/predict/results/detail",{params:{tag:this.$data.selectedTag}}).then((function(e){t.$data.knownKVs=[],Object.keys(e.data.data.parameters).forEach((function(a){e.data.data.parameters[a]&&t.$data.knownKVs.push({key:a,value:e.data.data.parameters[a]})})),t.$refs.resultChart.graphData=e.data.data.graphData,t.$refs.resultChart.refreshChart(),t.$refs.resultTable.tableOneData=e.data.data.tableOneData,t.$refs.resultTable.tableTwoData=e.data.data.tableTwoData}))}}},o=s,c=a("2877"),f=Object(c["a"])(o,r,l,!1,null,"8d6d3ec6",null);e["default"]=f.exports},b64b:function(t,e,a){var r=a("23e7"),l=a("7b0b"),n=a("df75"),i=a("d039"),s=i((function(){n(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(t){return n(l(t))}})},c3ab:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:0!==t.graphData.length||void 0!==t.graphData.yData,expression:"graphData.length !== 0 || graphData.yData !== undefined"}],staticStyle:{"margin-left":"20px"}},[a("el-row",[a("div",{staticStyle:{width:"680px",height:"300px"},attrs:{id:t.uniqueId}})]),a("el-row",[a("el-form",[a("el-form-item",[a("el-button",{on:{click:t.exportImage}},[t._v("导出图像")])],1),a("el-form-item",{attrs:{label:"显示方式："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.currentDisplayMethod,callback:function(e){t.currentDisplayMethod=e},expression:"currentDisplayMethod"}},t._l(t.displayMethods,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1)],1)],1)},l=[],n=(a("1276"),a("ac1f"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d3b7"),a("159b"),a("313e")),i=a("21a6");function s(t){for(var e=t.split(";base64,"),a=e[0].split(":")[1],r=window.atob(e[1]),l=r.length,n=new Uint8Array(l),i=0;i<l;++i)n[i]=r.charCodeAt(i);return new Blob([n],{type:a})}var o={data:function(){return{currentChart:void 0,graphData:[],params1st:{xTag:"xName",yTag:"yValue",xName:"",yName:""},params2nd:{xTag:"",yTag1st:"",yTag2nd:"",xName:"",yName:"",yName1st:"",yName2nd:""},displayMethods:[{label:"折线图",value:"line"},{label:"柱状图",value:"bar"},{label:"散点图",value:"scatter"}],currentDisplayMethod:"line"}},methods:{refreshChartDirty:function(){var t=this.$data.params1st;void 0===this.currentChart&&(this.currentChart=n["init"](document.getElementById(this.uniqueId)));var e=this.graphData.xData,a=this.graphData.yData[0].data,r={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:e,axisTick:{alignWithLabel:!0},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:a,name:t.yName,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top"}};this.currentChart.setOption(r,!0)},refreshChart:function(){var t=this.$data.params1st;void 0===this.currentChart&&(this.currentChart=n["init"](document.getElementById(this.uniqueId)));var e=[],a=[];this.graphData.forEach((function(t){t.year?e.push(t.year):t.time&&e.push(t.time),void 0!==t.predict?a.push(t.predict):void 0!==t.payload&&a.push(t.payload)}));var r={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:e,axisTick:{alignWithLabel:!0},axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:a,name:t.yName,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top"}};this.currentChart.setOption(r,!0)},refreshChart2nd:function(){var t=this.$data.params2nd;void 0===this.currentChart&&(this.currentChart=n["init"](document.getElementById(this.uniqueId)));var e=[],a=[],r=[];this.$data.graphData.forEach((function(l){e.push(l[t.xTag]),a.push(l[t.yTag1st]),r.push(l[t.yTag2nd])}));var l={color:["#3398DB"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",name:t.xName,data:e,axisTick:{alignWithLabel:!0},boundaryGap:"bar"===this.$data.currentDisplayMethod,onZero:!0,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},yAxis:{type:"value",name:t.yName,axisLabel:{show:!0,textStyle:{color:"#ffffff",fontSize:14}},axisLine:{lineStyle:{color:"#ffffff"}}},series:[{data:a,name:t.yName1st,type:this.$data.currentDisplayMethod},{data:r,name:t.yName2nd,type:this.$data.currentDisplayMethod}],legend:{orient:"horizontal",x:"center",y:"top"}};this.currentChart.setOption(l,!0)},exportImage:function(){if(this.currentChart){var t=this.currentChart.getDataURL(),e=s(t);Object(i["saveAs"])(e,"预测图像.png")}}},watch:{currentDisplayMethod:function(){"2nd"===this.typee?this.refreshChart2nd():"dirty"===this.typee?this.refreshChartDirty():this.refreshChart()}},computed:{uniqueId:function(){return void 0!==this.uid?this.uid:"globalChart"}},props:["typee","uid","title"]},c=o,f=a("2877"),d=Object(f["a"])(c,r,l,!1,null,"f9903da4",null);e["a"]=d.exports},f70a:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-form",[a("el-form-item",{attrs:{label:"评价指标表："}},[a("el-table",{attrs:{data:t.tableOneData}},[a("el-table-column",{attrs:{prop:"mape",label:"MAPE（%）"}}),a("el-table-column",{attrs:{prop:"rmse",label:"RMSE"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{disabled:0===t.tableOneData.length},on:{click:t.exportTableOneSheet}},[t._v("导出评价指标表")])],1),a("el-form-item",{attrs:{label:"年份 − 预测值表："}},[a("el-table",{attrs:{data:t.tableTwoData}},[a("el-table-column",{attrs:{prop:"year",label:"年份"}}),a("el-table-column",{attrs:{prop:"predict",label:"预测值（MW）"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{disabled:0===t.tableTwoData.length},on:{click:t.exportTableTwoSheet}},[t._v("导出预测结果表")])],1)],1)},l=[],n=a("f59f"),i=a("21a6"),s={name:"ResultTable",data:function(){return{tableOneData:[],tableTwoData:[]}},methods:{exportTableSheet:function(t,e){var a=n["parse"](t,{fields:e}),r=new Blob([a],{type:"text/csv"});Object(i["saveAs"])(r,"database.csv")},exportTableOneSheet:function(){this.exportTableSheet(this.$data.tableOneData,["index","r2","mape","rmse"])},exportTableTwoSheet:function(){this.exportTableSheet(this.$data.tableTwoData,["year","predict"])}}},o=s,c=a("2877"),f=Object(c["a"])(o,r,l,!1,null,"3a193e44",null);e["a"]=f.exports}}]);
//# sourceMappingURL=chunk-21380c70.a523287c.js.map