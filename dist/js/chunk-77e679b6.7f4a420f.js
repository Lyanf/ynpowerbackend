(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77e679b6"],{3705:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:7,offset:1}},[a("ProvMuniPredictSelectForm",{attrs:{"table-three-data":e.tableThreeData,"table-four-data":e.tableFourData},on:{"update:tableThreeData":function(t){e.tableThreeData=t},"update:table-three-data":function(t){e.tableThreeData=t},"update:tableFourData":function(t){e.tableFourData=t},"update:table-four-data":function(t){e.tableFourData=t}}})],1),a("el-col",{attrs:{span:15,offset:1}},[a("el-form",[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.currentChart,expression:"currentChart !== undefined"}]},[a("el-row",[a("div",{staticStyle:{width:"680px",height:"300px"},attrs:{id:"pieChart"}})])],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.currentChart,expression:"currentChart !== undefined"}]},[a("el-button",{on:{click:e.exportImage}},[e._v("导出图像")]),a("el-button",{attrs:{disabled:0===e.displayTableData.length},on:{click:e.exportResultSheet}},[e._v("导出预测结果表")])],1),a("el-form-item",{attrs:{label:"预测年份的协调预测结果："}},[a("el-table",{attrs:{data:e.displayTableData}},[a("el-table-column",{attrs:{label:"年份",prop:"year"}}),a("el-table-column",{attrs:{label:"地区",prop:"region"}}),a("el-table-column",{attrs:{label:"预测值（单位：MW）",prop:"payload"}})],1)],1),a("el-form-item")],1)],1)],1)],1)},n=[],o=(a("1276"),a("ac1f"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7"),a("d3b7"),a("159b"),a("ddb0"),a("fb6a"),a("99af"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{attrs:{"label-position":"right","label-width":"auto"}},[a("el-form-item",{attrs:{label:"数据文件："}},[a("el-upload",{ref:"upload",attrs:{action:"/","on-change":e.onSelectionChanges,"auto-upload":!1,multiple:!1,"list-type":"text","show-file-list":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选择文件")]),e.provFileName?a("div",[e._v(" "+e._s(e.provFileName)+" ")]):e._e()],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:!e.canCommitQuery},on:{click:e.performPrediction}},[e._v("预测")])],1)],1)}),l=[],i=(a("b0c0"),{name:"ProvMuniPredictSelectForm",data:function(){return{enabledUploadButton:!0,provFileName:"",rawFile:null,knownTags:[],knownUploadFiles:[],tableThreeDataInternal:[],tableFourDataInternal:[]}},methods:{onSelectionChanges:function(e){this.$data.provFileName=e.name,this.$data.rawFile=e.raw},performPrediction:function(){var e=this,t=new FormData;t.append("file",this.rawFile),t.append("method","省市总分协调算法"),this.$axios.post("/predict/provmuni",t).then((function(t){e.$data.tableThreeDataInternal=t.data.data}))}},computed:{canCommitQuery:function(){return 0!==this.$data.provFileName.length}},props:["tableThreeData","tableFourData"],watch:{tableThreeDataInternal:function(e){this.$emit("update:tableThreeData",e)},tableFourDataInternal:function(e){this.$emit("update:tableFourData",e)}}}),c=i,s=a("2877"),u=Object(s["a"])(c,o,l,!1,null,"4c973914",null),d=u.exports,h=a("f59f"),p=a("21a6"),b=a("313e");function f(e){for(var t=e.split(";base64,"),a=t[0].split(":")[1],r=window.atob(t[1]),n=r.length,o=new Uint8Array(n),l=0;l<n;++l)o[l]=r.charCodeAt(l);return new Blob([o],{type:a})}var m={name:"ProvMuniCoordPredict",data:function(){return{currentChart:void 0,tableThreeData:[],tableFourData:[],displayTableData:[]}},methods:{generateTable:function(){var e=this;this.$data.displayTableData=[];var t=this.$data.tableThreeData;t.values.forEach((function(a){var r=1,n=a[0];t.series.slice(1).forEach((function(t){e.$data.displayTableData.push({year:n,region:t,payload:a[r]}),r+=1}))}))},refreshChart:function(){var e=this.$data.displayTableData;void 0===this.currentChart&&(this.currentChart=b["init"](document.getElementById("pieChart")));var t=[];e.forEach((function(e){t.push({name:"".concat(e.region,", ").concat(e.year," 年"),value:e.payload})})),this.currentChart.setOption({series:[{name:"协调预测结果",type:"pie",radius:"55%",data:t}]},!0)},exportResultSheet:function(){this.exportTableSheet(this.$data.displayTableData,["year","region","payload"])},exportImage:function(){if(this.currentChart){var e=this.currentChart.getDataURL(),t=f(e);Object(p["saveAs"])(t,"协调预测结果图像.png")}},exportTableSheet:function(e,t){var a=h["parse"](e,{fields:t}),r=new Blob([a],{type:"text/csv"});Object(p["saveAs"])(r,"协调预测结果表格.csv")}},components:{ProvMuniPredictSelectForm:d},watch:{tableThreeData:{handler:function(){this.generateTable(),this.refreshChart()},deep:!0,immediate:!1}}},v=m,w=Object(s["a"])(v,r,n,!1,null,"2d959abc",null);t["default"]=w.exports},"99af":function(e,t,a){"use strict";var r=a("23e7"),n=a("d039"),o=a("e8b5"),l=a("861d"),i=a("7b0b"),c=a("50c4"),s=a("8418"),u=a("65f0"),d=a("1dde"),h=a("b622"),p=a("2d00"),b=h("isConcatSpreadable"),f=9007199254740991,m="Maximum allowed index exceeded",v=p>=51||!n((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),w=d("concat"),y=function(e){if(!l(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},D=!v||!w;r({target:"Array",proto:!0,forced:D},{concat:function(e){var t,a,r,n,o,l=i(this),d=u(l,0),h=0;for(t=-1,r=arguments.length;t<r;t++)if(o=-1===t?l:arguments[t],y(o)){if(n=c(o.length),h+n>f)throw TypeError(m);for(a=0;a<n;a++,h++)a in o&&s(d,h,o[a])}else{if(h>=f)throw TypeError(m);s(d,h++,o)}return d.length=h,d}})}}]);
//# sourceMappingURL=chunk-77e679b6.7f4a420f.js.map