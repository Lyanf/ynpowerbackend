{"version":3,"sources":["webpack:///./src/views/DataCheck.vue?b8fb","webpack:///./src/components/DataPatchTable.vue?e27b","webpack:///src/components/DataPatchTable.vue","webpack:///./src/components/DataPatchTable.vue?2625","webpack:///./src/components/DataPatchTable.vue","webpack:///src/views/DataCheck.vue","webpack:///./src/views/DataCheck.vue?58b9","webpack:///./src/views/DataCheck.vue","webpack:///./src/views/DataCheck.vue?89d8"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","ref","metaDataTree","model","value","postParams","callback","$$v","$set","expression","_l","item","key","beginYear","endYear","on","$event","category","length","loadExceptions","_v","tableData","staticRenderFns","columns","displayData","rowHandle","editTemplate","handleDialogCancel","handleRowResolve","handleRowAccept","staticStyle","_s","dataEntryLength","name","props","computed","undefined","data","title","remove","text","size","type","confirm","edit","fixed","methods","component","components","knownRegions","knownGrains","region","grain","mounted","loadMetaData","loadRegions","loadGrains","$axios","get","then","post","$data"],"mappings":"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","file":"js/chunk-dc0b629a.e28314d6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-row',[_c('el-col',{attrs:{\"span\":8,\"offset\":1}},[_c('el-form',[_c('el-form-item',{attrs:{\"label\":\"数据节点：\"}},[_c('el-cascader',{ref:\"cascader\",attrs:{\"id\":\"cascader\",\"options\":_vm.metaDataTree,\"change-on-select\":\"\"},model:{value:(_vm.postParams.category),callback:function ($$v) {_vm.$set(_vm.postParams, \"category\", $$v)},expression:\"postParams.category\"}})],1),_c('el-form-item',{attrs:{\"label\":\"地区选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.postParams.region),callback:function ($$v) {_vm.$set(_vm.postParams, \"region\", $$v)},expression:\"postParams.region\"}},_vm._l((_vm.knownRegions),function(item){return _c('el-option',{key:item,attrs:{\"label\":item,\"value\":item}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"粒度选择：\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\",\"value\":\"年\",\"disabled\":true}})],1),_c('el-form-item',{attrs:{\"label\":\"年份选择：\"}},[_c('year-range-selector',{attrs:{\"begin-year\":_vm.postParams.beginYear,\"end-year\":_vm.postParams.endYear},on:{\"update:beginYear\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:begin-year\":function($event){return _vm.$set(_vm.postParams, \"beginYear\", $event)},\"update:endYear\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)},\"update:end-year\":function($event){return _vm.$set(_vm.postParams, \"endYear\", $event)}}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"disabled\":_vm.postParams.beginYear === null ||\n                        _vm.postParams.endYear  === null ||\n                        _vm.postParams.category.length === 0},on:{\"click\":_vm.loadExceptions}},[_vm._v(\" 异常检测 \")])],1)],1)],1),_c('el-col',{attrs:{\"span\":15}},[_c('data-patch-table',{attrs:{\"display-data\":_vm.tableData}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('d2-crud',{ref:\"d2Crud\",attrs:{\"columns\":_vm.columns,\"data\":_vm.displayData,\"rowHandle\":_vm.rowHandle,\"edit-template\":_vm.editTemplate},on:{\"dialog-cancel\":_vm.handleDialogCancel,\"row-edit\":_vm.handleRowResolve,\"row-remove\":_vm.handleRowAccept}}),_c('div',{staticStyle:{\"color\":\"darkgray\",\"font-size\":\"12px\"}},[_vm._v(\" 共 \"+_vm._s(_vm.dataEntryLength)+\" 条 \")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <d2-crud\n      ref=\"d2Crud\"\n      :columns=\"columns\"\n      :data=\"displayData\"\n\n      @dialog-cancel=\"handleDialogCancel\"\n\n      :rowHandle=\"rowHandle\"\n      :edit-template=\"editTemplate\"\n      @row-edit=\"handleRowResolve\"\n      @row-remove=\"handleRowAccept\"\n\n    ></d2-crud>\n    <div style=\"color: darkgray; font-size: 12px\">\n      共 {{ dataEntryLength }} 条\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'DataPatchTable',\n  props: ['displayData'],\n  computed: {\n    dataEntryLength() {\n      if (this.displayData === undefined) {\n        return 0;\n      }\n      return this.displayData.length;\n    },\n  },\n  data() {\n    return {\n      columns: [{\n        title: '元数据类型',\n        key: 'category',\n      }, {\n        title: '数据粒度',\n        key: 'grain',\n      }, {\n        title: '地区',\n        key: 'region',\n      }, {\n        title: '时间',\n        key: 'key',\n      }, {\n        title: '当前值',\n        key: 'value',\n      }, {\n        title: '更正建议',\n        key: 'suggest',\n      }],\n\n      editTemplate: {\n        key: {\n          title: '键',\n        },\n        value: {\n          title: '值',\n        },\n      },\n\n      rowHandle: {\n        remove: {\n          text: '接受',\n          size: 'small',\n          type: 'primary',\n          confirm: false,\n        },\n        edit: {\n          text: '更正',\n          size: 'small',\n          fixed: 'right',\n        },\n      },\n    };\n  },\n  methods:\n    {\n      handleDialogCancel(done) {\n        done();\n      },\n      handleRowResolve({ index, row }, done) {\n        this.$axios.post('/db/except/resolve', {\n          originData: this.displayData[index],\n          modifiedData: row,\n        }).then((response) => {\n          console.log(response);\n          this.$messenger.success('手动更正成功。');\n          this.displayData.remove(index);\n          done();\n        });\n      },\n      // eslint-disable-next-line no-unused-vars\n      handleRowAccept({ index, row }, done) {\n        this.$axios.post('/db/except/accept', {\n          acceptData: this.displayData[index],\n        }).then((response) => {\n          console.log(response);\n          this.$messenger.success('已接受更正建议。');\n          this.displayData.remove(index);\n          done();\n        });\n      },\n    },\n};\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataPatchTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataPatchTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataPatchTable.vue?vue&type=template&id=e5dc3260&scoped=true&\"\nimport script from \"./DataPatchTable.vue?vue&type=script&lang=js&\"\nexport * from \"./DataPatchTable.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e5dc3260\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-row>\n    <el-col :span=\"8\" :offset=\"1\">\n      <el-form>\n        <el-form-item label=\"数据节点：\">\n          <el-cascader id=\"cascader\" :options=\"metaDataTree\"\n                       change-on-select\n                       ref=\"cascader\" v-model=\"postParams.category\"></el-cascader>\n        </el-form-item>\n        <el-form-item label=\"地区选择：\">\n          <el-select placeholder=\"请选择\" v-model=\"postParams.region\">\n            <el-option\n              v-for=\"item in knownRegions\"\n              :key=\"item\"\n              :label=\"item\"\n              :value=\"item\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"粒度选择：\">\n          <el-select placeholder=\"请选择\" value=\"年\" :disabled=\"true\">\n<!--            <el-option-->\n<!--              v-for=\"item in knownGrains\"-->\n<!--              :key=\"item\"-->\n<!--              :label=\"item\"-->\n<!--              :value=\"item\">-->\n<!--            </el-option>-->\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"年份选择：\">\n          <year-range-selector\n            :begin-year.sync=\"postParams.beginYear\"\n            :end-year.sync=\"postParams.endYear\">\n          </year-range-selector>\n        </el-form-item>\n        <el-form-item>\n          <el-button\n            :disabled=\"postParams.beginYear === null ||\n                        postParams.endYear  === null ||\n                        postParams.category.length === 0\"\n            @click=\"loadExceptions\">\n            异常检测\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-col>\n    <el-col :span=\"15\">\n      <data-patch-table :display-data=\"tableData\">\n      </data-patch-table>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\nimport DataPatchTable from '@/components/DataPatchTable.vue';\nimport YearRangeSelector from '@/components/YearRangeSelector.vue';\n\nexport default {\n  name: 'dataCheck',\n  components: { YearRangeSelector, DataPatchTable },\n  data() {\n    return {\n      tableData: [],\n      metaDataTree: [],\n      knownRegions: [],\n      knownGrains: [],\n      postParams: {\n        category: [],\n        region: null,\n        grain: '年',\n        beginYear: null,\n        endYear: null,\n      },\n    };\n  },\n  mounted() {\n    this.loadMetaData();\n    this.loadRegions();\n    this.loadGrains();\n  },\n  methods: {\n    loadMetaData() {\n      this.$axios.get('/db/metadata').then((response) => {\n        this.$data.metaDataTree = response.data.data;\n      });\n    },\n    loadExceptions() {\n      this.$axios.post('/db/except/query', this.$data.postParams).then((response) => {\n        this.tableData = response.data.data;\n      });\n    },\n    loadRegions() {\n      this.$axios.get('/region/query').then((response) => {\n        this.$data.knownRegions = response.data.data;\n      });\n    },\n    loadGrains() {\n      this.$axios.get('/grain/query').then((response) => {\n        this.$data.knownGrains = response.data.data;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.el-form-item .el-select,.el-input,.el-cascader {\n  width: 55%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DataCheck.vue?vue&type=template&id=69b679d6&scoped=true&\"\nimport script from \"./DataCheck.vue?vue&type=script&lang=js&\"\nexport * from \"./DataCheck.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DataCheck.vue?vue&type=style&index=0&id=69b679d6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"69b679d6\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataCheck.vue?vue&type=style&index=0&id=69b679d6&scoped=true&lang=css&\""],"sourceRoot":""}